= View Designer
:page-aliases: screen-designer.adoc

Дизайнер экранов представляет собой ряд панелей и окон инструментов, которые позволяют разрабатывать макет экрана и задавать свойства компонентов пользовательского интерфейса в стиле WYSIWYG. Редактор XML экранов интегрирован с Дизайнером экранов, поэтому XML-файл можно редактировать напрямую или использовать панели дизайнера для генерации кода.

include::subscription-note.adoc[]

Панель *Jmix UI* реализована как независимое окно инструментов IDE и отображается автоматически при открытии дескриптора экрана в редакторе.

Панель *Jmix UI* состоит из панели иерархии и панели инспектора.

image::screen-designer.png[align="center",width="1064"]

. Source Code Editor - редактор исходного кода
. Top Actions Panel - верхняя панель действий
. Layout Preview Panel - панель предварительного просмотра компоновки
. Jmix UI Hierarchy Panel - панель иерархии компонентов *Jmix UI*
. Jmix UI Inspector Panel - панель инспектора *Jmix UI*

[[layout-preview-panel]]
== Панель предварительного просмотра компоновки

Панель предварительного просмотра компоновки используется для отображения интерактивного схематического представления компоновки экрана. Оно разделяет пространство редактора вместе с исходным кодом дескриптора экрана.

image::screen-views.png[align="center",width="789"]

Используйте кнопки в правом верхнем углу редактора компоновки экрана.

. *Editor only* - в редакторе отображается только исходный код.
. *Editor and Preview* - пространство редактора разделено так, чтобы отображать и исходный код, и предварительный просмотр.
. *Preview only* - в редакторе отображается только предварительный просмотр.
. *Preview in Window* - исходный код отображается в редакторе, а предварительный просмотр отображается в отдельном окне.

Панель имеет несколько элементов управления, расположенных в правом верхнем углу:

* Кнопка *Restart -> Just Restart* перезагружает содержимое страницы предварительного просмотра.
* Кнопка *Restart -> Clean and Restart* очищает все фронтенд-файлы и заново запускает сборку фронтенда.
* Кнопка *Console* открывает или закрывает консоль с выводом сборки фронтенда, что может помочь в диагностике проблем.
* Выпадающий список *Theme* позволяет вам выбрать одну из предопределенных тем: светлую или темную.

[[component-palette]]
== Палитра компонентов

Вы можете открыть палитру компонентов, используя следующие способы:

* Нажмите на кнопку *Add Component* на верхней панели действий:
+
image::add-component-method1.png[align="center",width="585"]

* Щелкните правой кнопкой мыши на пункте *Add Component* в контекстном меню панели иерархии *Jmix UI*:
+
image::add-component-method2.png[align="center",width="352"]

* Используя `⌘N` на MacOS или `Alt+Insert` на Windows и Linux, откройте меню *Generate*:
+
image::add-component-method3.png[align="center",width="775"]

Палитра компонентов отображает набор доступных элементов экрана: xref:flow-ui:vc/components.adoc[визуальные компоненты], xref:flow-ui:vc/layouts.adoc[контейнеры], xref:flow-ui:vc/html.adoc[HTML компоненты], xref:flow-ui:data-components.adoc[компоненты данных] - контейнеры и загрузчики, xref:flow-ui:facets.adoc[фасеты], в том числе действия и настройки диалоговых окон.

image::view-palette.png[align="center",width="421"]

Используйте поле поиска, чтобы найти необходимый компонент.

// If the add-ons installed to the application have their own components, they will be shown in the palette, for example, in case of the Charts add-on:
//
// image::screen-charts.png[align="center",width="487"]

Чтобы добавить компонент в макет, перетащите его из палитры в соответствующее место в исходном коде XML или на панель иерархии <<component-hierarchy,Jmix UI>>.

Щелкните правой кнопкой мыши по компоненту в палитре, чтобы открыть контекстное меню со следующими действиями:

* *Add to Design* - добавляет выбранный компонент на экран внутри выбранного элемента в иерархии.
* *Jmix Documentation* - открывает страницу документации компонента.

[[component-hierarchy]]
== Панель иерархии Jmix UI

На панели иерархии *Jmix UI* отображается дерево компонентов, добавленных в компоновку.

Вы можете перемещать элементы из палитры компонентов или изменять порядок элементов в дереве. Когда элемент выбран, на панели инспектора *Jmix UI* отображаются его свойства.

Щелкните правой кнопкой мыши по элементу, чтобы открыть его контекстное меню со следующими действиями:

image::components-hierarchy.png[align="center",width="378"]

* *Add Component* открывает <<component-palette,палитру компонентов>>.
* *Inject to Controller* инжектирует компонент в контроллер экрана или переходит к существующему объявлению инжектирования.
* *Generate Handler* используется для генерации обработчика для компонента.
//* *Convert to* преобразует компонент в один из аналогичных альтернативных компонентов.
//* *Wrap into* оборачивает компонент в один из предложенных контейнеров.
* *Go to XML* позволяет перейти к тегу XML в исходном коде.
* *Delete*, *Copy*, *Cut* или *Paste* удаляет, копирует, вырезает или вставляет элемент.
//* *Jmix Documentation* открывает страницу документации выбранного компонента.

[[component-inspector]]
== Панель инспектора Jmix UI

На панели инспектора *Jmix UI* отображаются вкладки *Properties* и *Handlers*.

[[component-inspector-add-button]]
Для некоторых типов выбранных элементов отображается кнопка *+ Add*, которая позволяет добавить соответствующий подэлемент, например, действие таблицы, колонку, форматер, валидатор и так далее.

image::component-inspector-add-button.png[align="center", width="277"]

[[add-picker-action]]
* Чтобы добавить xref:flow-ui:actions/entity-picker-actions.adoc[действие компонента entityPicker] или xref:flow-ui:actions/value-picker-actions.adoc[действие компонента valuePicker], выберите соответствующий компонент в XML-дескрипторе экрана или на панели иерархии *Jmix UI* и нажмите *Add → Action* в панели инспектора *Jmix UI*. Появится диалоговое окно *Add Action*:
+
image::add-picker-action-dialog.png[align="center", width="492"]
+
Выберите какое-нибудь стандартное действие из списка.
+
Чтобы добавить пользовательское xref:flow-ui:actions/declarative-actions.adoc[декларативное действие], выберите *New Base Action* и нажмите *OK*. Появится диалоговое окно *BaseAction Required Properties*:
+
image::action-id-dialog.png[align="center", width="486"]
+
Затем реализуйте пользовательскую логику в контроллере экрана, подписавшись на  `ActionPerformedEvent`.

[[add-action]]
* Чтобы добавить xref:flow-ui:actions/list-actions.adoc[действие с коллекцией], выберите компонент xref:flow-ui:vc/components/dataGrid.adoc[dataGrid] или xref:flow-ui:vc/components/treeDataGrid.adoc[treeDataGrid] в XML-дескрипторе экрана или на панели иерархии *Jmix UI* и нажмите *Add → Action* в панели инспектора *Jmix UI*. Появится диалоговое окно *Add Action*:
+
image::add-action-dialog.png[align="center", width="492"]
// +
// Если флажок *Create Button for selected actions* установлен, Jmix Studio создаст кнопку в контейнере `buttonsPanel`, связанную с добавляемым действием.

[[add-column]]
* Чтобы добавить `column`, выберите компонент `dataGrid` или `treeDataGrid` в XML-дескрипторе экрана или на панели иерархии *Jmix UI* и нажмите *Add → Columns → Column* на панели инспектора *Jmix UI*. Появится диалоговое окно *Add Column*:
+
image::add-column-dialog.png[align="center", width="386"]
+
Этот список содержит свойства, которые включены в xref:data-access:fetching.adoc#fetch-plan[фетч-план], но еще не отображены компонентом `dataGrid`.
// +
// Чтобы добавить xref:ui:vcl/components/data-grid.adoc#data-grid-column-generation[генерируемую колонку], выберите *New Custom Column* и нажмите *OK*. Появится диалоговое окно *Column generator*:
// +
// image::column-generator.png[align="center", width="431"]
// +
// Выберите генерируемый тип из списка, предложенного Studio, и соответствующий тип xref:ui:vcl/components/data-grid.adoc#renderers[рендерера].
// +
// Studio добавит сгенерированную колонку в таблицу в XML-дескриптор и метод-обработчик в контроллер экрана.

[[properties-tab]]
=== Вкладка Properties

Вкладка *Properties* показывает атрибуты выбранного элемента экрана и позволяет их редактировать.

image::component-properties-panel.png[align="center",width="378"]

Некоторые свойства имеют значения по умолчанию, которые выделены серым цветом.

Используйте поле поиска, чтобы найти необходимый атрибут.

Атрибуты по умолчанию упорядочены по имени. В первой колонке перечислены имена атрибутов для выбранного компонента. Во второй колонке на вкладке *Properties* отображаются значения свойств следующим образом:

*  Когда свойство выбрано, значение сменяется полем редактирования, в котором можно ввести новое значение.
+
image::properties-text-value.png[align="center",width="263"]

* Если значение представляет собой список, при выборе свойства появляется кнопка выпадающего списка.
+
image::properties-list-value.png[align="center",width="277"]

* Если значение является логическим, его можно изменить с помощью флажка:
+
image::properties-boolean-value.png[align="center",width="277"]

[[localized-message-dialog]]
* Такие свойства, как xref:flow-ui:vc/common-attributes.adoc#title[title], xref:flow-ui:vc/common-attributes.adoc#label[label], xref:flow-ui:vc/common-attributes.adoc#helperText[helperText], имеют возможность задавать xref:localization:index.adoc[локализованные] имена. Нажмите кнопку image:icons/globe.svg[Globe], чтобы открыть диалоговое окно, в котором можно задать локализованное сообщение для атрибута.
+
image::properties-message-value.png[align="center",width="847"]

[[style-name-editor]]
* Нажмите кнопку image:icons/add.svg[Add] для свойства xref:flow-ui:vc/common-attributes.adoc#themeNames[themeNames], чтобы открыть диалоговое окно *ThemeNames Property Editor*:
+
image::properties-theme-name-value.png[align="center",width="422"]
// +
// Style names come by default arranged by the component or container name.
//
// [[icon-editor]]
// * Click the image:edit.png[Edit] button for the xref:ui:vcl/xml.adoc#icon[icon] property to open the *Choose icon* dialog:
// +
// image::choose-icon-dialog.png[align="center"]
// +
// ** The *JMIX ICONS* tab contains icons from the default `JmixIcon` icon set. It includes an almost full `FontAwesome` icon set and Jmix-specific icons.
// ** The *FONT AWESOME* tab contains icons from the `FontAwesome` set of font icons.
// ** The *ICON SET* tab contains icons from the xref:ui:icons/icon-sets.adoc[custom icon sets].
// ** The *APPLICATION ICONS* tab contains icons from the xref:ui:themes.adoc[theme] sources.

[[handlers-tab]]
=== Вкладка Handlers

На вкладке *Handlers* отображаются слушатели событий и делегаты компонентов, которые могут быть связаны с выбранным компонентом. Чтобы сгенерировать необходимый метод слушателя, просто дважды щелкните соответствующую строку.

image::view-designer-handlers.png[align="center",width="290"]

Вы будете перенаправлены на контроллер экрана с фрагментом кода.

[[top-actions-panel]]
== Верхняя панель действий

Панель действий расположена в верхней части редактора исходного кода. Она предоставляет доступ к следующим действиям:

* *Controller* - переходит к контроллеру экрана.
* `<entity class name>` - отображается, если экран представляет собой экран списка или экран деталей сущности и позволяет перейти к сущности, связанной с текущим экраном.
* *Add Component* - открывает палитру компонентов:

image::view-designer-top-panel.png[align="center",width="767"]

Кроме того, вы можете переключаться между дескриптором и контроллером экрана с помощью маркера на поле слева.