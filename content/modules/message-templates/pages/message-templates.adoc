= Шаблоны сообщений

В экране *Шаблоны сообщений* пользователи могут создавать новые шаблоны сообщений, редактировать существующие и удалять шаблоны, которые больше не нужны.

При нажатии на кнопку *Создать* открывается экран *Шаблон сообщения*, в котором представлен подробный интерфейс для настройки шаблона. В этом экране вы найдете вкладку *Детали шаблона* и вкладку *Параметры*.

[[template-details]]
== Детали шаблона

Вкладка *Детали шаблона* содержит панель для настройки атрибутов шаблона и панель для HTML-редактора, где вы можете спроектировать макет и содержимое шаблона.

image::template-details.png[align="center", width="1177"]

[[template-attributes]]
=== Настройка атрибутов шаблона

Для каждого шаблона необходимо настроить следующие параметры:

* *Название*: Понятное название шаблона. Это обязательное поле, которое должно четко описывать назначение шаблона.
* *Код*: Уникальный идентификатор шаблона. Этот код можно использовать для поиска шаблона через вызовы API. Это также обязательное поле.
* *Тип*: Выберите формат `Текст` или `HTML` в зависимости от предполагаемого использования шаблона.
* *Группа* (необязательно): Назначьте шаблон определенной группе для лучшей организации. Группы можно настроить в экране *Группы шаблонов*.

[[designing-template]]
=== Разработка шаблона

HTML-редактор позволяет создавать и настраивать собственные шаблоны с помощью различных элементов: текста, изображений, кнопок и многого другого. Свойства каждого элемента легко настроить в специальных панелях редактора.

В текст шаблона можно добавлять <<placeholders,плейсхолдеры>>, которые будут автоматически заполняться динамическими данными.

Более подробную информацию о расширенных возможностях настройки и подробные инструкции по работе с редактором вы найдете в https://grapesjs.com/docs/[документации GrapesJS^].

[[placeholders]]
==== Плейсхолдеры

Плейсхолдеры - это динамические переменные в шаблонах сообщений, которые заменяются фактическими данными во время выполнения. Эти плейсхолдеры заключаются в синтаксис интерполяции переменных FreeMarker (обычно `++${variableName}++`).

Данные, используемые для заполнения этих плейсхолдеров, могут поступать из различных источников, таких как <<parameters,параметры>> шаблона, определенные в самом шаблоне, и параметры, передаваемые программно из кода приложения.

Помимо простой вставки значений, FreeMarker предлагает широкий набор встроенных функций для форматирования и обработки данных внутри плейсхолдеров. Вы можете использовать функции для форматирования дат, чисел, манипулирования строками (приведение к верхнему или нижнему регистру, извлечение подстроки) и многого другого. Например, `${date?string["MM/dd/yyyy"]}` отформатирует значение даты в формате `MM/dd/yyyy`.

Более подробную информацию можно найти в документации https://freemarker.apache.org/[FreeMarker^].

[[template-editor-tools]]
=== Инструменты редактора шаблонов

В верхней части HTML-редактора находится панель инструментов, которая содержит все необходимые функции для работы с шаблонами:

* *Импорт HTML*: Загрузите готовый HTML-код и добавьте его в свой шаблон.

* *Просмотр исходного кода*: Просмотрите HTML-код шаблона, чтобы отредактировать его или проанализировать.

* *Предварительный просмотр*: Откройте шаблон в новой вкладке, чтобы увидеть, как он будет выглядеть.

[[parameters]]
== Параметры

Параметры шаблона можно создать и настроить на вкладке *Параметры*.

После нажатия на кнопку *Создать* отобразится диалоговое окно *Параметр шаблона*.

image::template-parameter.png[align="center", width="641"]

CAUTION: Алиасы параметров должны быть уникальными в пределах одного шаблона.

[[parameter-details]]
=== Детали параметра

На вкладке *Детали параметра* можно настроить параметры, используемые в ваших шаблонах. Каждый параметр имеет следующие настраиваемые свойства:

* *Имя*: Имя параметра, которое будет отображаться в форме ввода параметров.

* *Алиас параметра*: Уникальный идентификатор, используемый для обращения к параметру в шаблоне. Этот алиас необходим для программного доступа к параметру.

* *Тип*: Тип данных параметра. Поддерживаются следующие типы: простые (`Строка`, `Число`, `Логический`), типы времени (`Дата`, `Время`, `Дата и время`), а также сложные типы, такие как `Перечисление`, `Сущность` или `Список сущностей`.

* *Скрытый*: Флаг, определяющий, должно ли поле ввода параметра быть скрыто от пользователей. Если включено, параметр не будет отображаться в форме ввода.

* *Обязательный*: Флаг, указывающий, является ли параметр обязательным для заполнения. Если включено, пользователи должны указать значение для этого параметра, прежде чем продолжить.

* *Значение по умолчанию*: Если пользователь не укажет значение для этого параметра, будет автоматически использовано указанное здесь значение. Это обеспечивает наличие значения у параметра, даже если пользователь его не изменяет.

==== Типы параметров и дополнительные поля

В зависимости от выбранного типа параметра могут потребоваться дополнительные поля для настройки:

* *Сущность или список сущностей*:

** *Сущность*: Указывает сущность, используемую в качестве параметра. Обязательно для заполнения, если тип параметра - `Сущность` или `Список сущностей`.

* *Перечисление*:

** *Перечисление*: Указывает перечисление, используемое в качестве параметра. Обязательно для заполнения, если тип параметра - `Перечисление`.

* *Типы времени (Дата, Время, Дата и время)*:

** *Текущая дата/время по умолчанию*: Флаг, определяющий, следует ли использовать текущую дату, время или отметку времени в качестве значения по умолчанию для параметра. Если включено, система автоматически заполнит параметр текущей датой/временем, если не указано иное значение.

[[localization]]
=== Локализация

На вкладке *Локализация* можно задать имена параметров для различных языковых версий.