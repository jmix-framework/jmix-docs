= 3. Стилизация

В этой главе вы:

* Создадите действия для управления видимостью колонок.
* Добавите визуальные стили для компонента с помощью свойств.
* Создадите рендереры для нижнего колонтитула колонок.

[[adding-column-actions-buttons]]
== Добавление кнопок действий в столбец

++++
<div class="jmix-ui-live-demo-container">
    <a href="http://demo.jmix.ru/ui-samples/sample/kanban-column-actions" class="live-demo-btn" target="_blank">ДЕМОНСТРАЦИЯ</a>
</div>
++++

Компонент Kanban поддерживает динамические изменения настроек отображения и видимости столбцов. Чтобы включить эту функцию, необходимо установить атрибут xref:kanban-component.adoc#columnActionsEnabled[columnActionsEnabled]. Этот атрибут добавляет кнопку управления видимостью столбца в заголовок. Чтобы иметь возможность свернуть столбец, необходимо установить атрибут xref:kanban-component.adoc#collapsible[collapsible].

Найдите файл `kanban-task-list-view.xml` в окне инструментов *Jmix* и дважды щелкните по нему. Выберите `kanban` в панели иерархии *Jmix UI* или в XML-дескрипторе. Затем отметьте флажки `collapsible` и `columnActionsEnabled`:

image::styling-attributes.png[align="center",width="1170"]

Нажмите *Ctrl/Cmd+S* и переключитесь на запущенное приложение. Откройте экран `Kanban board`. Теперь доступны элементы управления видимостью столбцов.

[TIP]
====
Чтобы сохранить состояние столбцов после закрытия экрана, вы можете использовать фасет xref:flow-ui:facets/settings.adoc[Settings].
====

image::column-controls-buttons.png[align="center",width="1143"]

[[styles-via-properties]]
== Стилизация через свойства

++++
<div class="jmix-ui-live-demo-container">
    <a href="http://demo.jmix.ru/ui-samples/sample/kanban-styling" class="live-demo-btn" target="_blank">ДЕМОНСТРАЦИЯ</a>
</div>
++++

Существует множество атрибутов Kanban, которые изменяют визуальный внешний вид компонента. Вам необходимо добавить следующие атрибуты:

* `columnSummaryEnabled`, `columnFooterVisible` - для отображения сводки.
* `columnColorEntireSurfaceEnabled` - для выделения фона столбцов контрастным цветом.
* `dropPlaceholderAllowed` - для добавления заполнителя при перемещении карточек задач.
* `color` для столбцов, `applyColumnColorToTasks` - для специального выделения каждого столбца.

Все эти атрибуты можно добавить с помощью панели инспектора компонентов *Jmix UI* или с помощью XML-разметки.

[source,xml,indent=0]
----
include::../examples/kanban-ex2/src/main/resources/com/company/demo/view/kanbantasklist/kanban-task-list-view.xml[tags=kanban]
----

Нажмите *Ctrl/Cmd+S* и переключитесь на запущенное приложение. Внешний вид доски Kanban теперь изменится:

image::kanban-task-list-view-styled.png[align="center",width="1143"]

[[renderer-for-column]]
== Рендеринг нижнего колонтитула столбца

Компонент `kanban` поддерживает пользовательские JavaScript-рендереры для стилизации и отображения карточек задач и столбцов. Дополнительную информацию смотрите в разделе xref:kanban-component.adoc#renderers[Рендереры].

Чтобы выделить столбец, в котором слишком много задач, необходимо определить рендерер для нижнего колонтитула столбца.

Для этого выберите `kanban` в панели иерархии *Jmix UI* или в XML-дескрипторе, а затем нажмите кнопку *Add* на панели инспектора компонентов. Из выпадающего списка выберите *ColumnFooterRendererFunction*:

image::add-column-footer-render.png[align="center",width="1170"]

Функция `ColumnFooterRendererFunction` определяется обратным вызовом, который можно использовать для настройки рендеринга нижнего колонтитула столбца. Обратный вызов принимает три аргумента: HTML-элемент нижнего колонтитула столбца, данные столбца и поле данных столбца.

Вам необходимо реализовать обратный вызов, который будет выделять цветом нижний колонтитул, если в столбце больше одной задачи:

[source,xml,indent=0]
----
include::../examples/kanban-ex2/src/main/resources/com/company/demo/view/kanbantasklist/kanban-task-list-view.xml[tags=columnFooterRendererFunction]
----

Нажмите *Ctrl/Cmd+S* и переключитесь на запущенное приложение.

image::column-footer-renderer-result.png[align="center",width="1143"]

== Резюме

В этом разделе мы рассмотрели, как настроить визуальный внешний вид вашей доски Kanban в Jmix.

* *Стилизация с помощью свойств*: Вы узнали, как использовать встроенные свойства дополнения Kanban для управления различными аспектами визуального стиля компонента Kanban, такими как цвета столбцов, отображение сводки и так далее.
* *Рендереры нижнего колонтитула столбца*: Вы изучили, как определить пользовательские рендереры для нижнего колонтитула столбцов, позволяющие вам отображать дополнительную информацию или выделять важные аспекты каждого столбца.
* *Добавление кнопок действий столбца*: Вы поняли, как реализовать кнопки, позволяющие пользователям управлять видимостью или другими действиями для отдельных столбцов.