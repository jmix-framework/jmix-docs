= Композитный компонент
:page-aliases: custom-components/composite-components.adoc

Композитный компонент — это компонент, состоящий из других компонентов. Как и xref:fragments/fragments.adoc[фрагменты], композитные компоненты позволяют повторно использовать элементы компоновки  и логику экранов.

Композитные компоненты рекомендуется использовать в следующих случаях:

* Функциональность компонента может быть реализована как комбинация существующих визуальных компонентов. +
Если вам нужны какие-либо нестандартные функции, xref:vc/creating-components/js-component.adoc[интегрируйте библиотеку JavaScript] или xref:vc/creating-components/creating-web-component.adoc[создайте веб-компонент] с нуля.
* Компонент относительно прост и не загружает и не сохраняет данные самостоятельно. В противном случае рассмотрите возможность создания фрагмента.

[[composite]]
== Использование Composite

В приведенном ниже примере компонент `ColorComponent` создается путем комбинирования компонента `ColorPicker`, созданного в разделе xref:vc/creating-components/using-element-api.adoc[], и компонента xref:vc/html-components/span.adoc[span], который отображает его значение:

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/component/ColorComponent.java[tags=composite-component]
----
<1> Базовый класс `Composite` параметризован типом корневого компонента.
<2> Доступ к корневому компоненту можно получить, используя метод `getContent()`.
<3> Метод `initContent()` вызывается, когда содержимое композитного компонента запрашивается в первый раз. Этот метод должен инициализировать структуру компонента для `Composite` и вернуть корневой компонент. По умолчанию этот метод использует рефлексию для создания экземпляра компонента на основе generic-типа подкласса.
<4> Публичный API композитного компонента, который делегирует вызовы компоненту `colorPicker`.

.Композитный компонент, добавленный в экран
image::visual-components/creating-components/composite-component.png[align="center", width="150"]

[[custom-field]]
== Использование CustomField

https://vaadin.com/docs/latest/components/custom-field[CustomField^] — это базовый класс для обертывания нескольких компонентов в одно поле. Он предоставляет стандартные функции ввода, такие как надпись, подсказка и валидация. Используйте его для создания собственных компонентов ввода.

Предыдущий пример можно переписать как `CustomField`:

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/component/ColorField.java[tags=custom-field]
----

После реализации компонента его можно использовать в экранах, например:

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/customcomponent/compositecomponent/CompositeComponentView.java[tags=composite-component-view;!composite-component]
----

.Пользовательское поле, добавленное в экран
image::visual-components/creating-components/custom-field.png[align="center", width="150"]