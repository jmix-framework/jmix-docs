= 复合组件

复合组件是由其他多个组件组合而成。与 xref:fragments/fragments.adoc[fragments] 类似，复合组件能复用一些展示布局和逻辑。

下列情况我们建议使用复合组件：

* 组件功能可以用已有的可视化组件以组合的方式来实现。
+
如果需要非标准功能，请 xref:vc/creating-components/js-component.adoc[集成 JavaScript 库] 或 xref:vc/creating-components/creating-web-component.adoc[创建一个 Web 组件]。
* 组件相对比较简单，本身并不会加载或者保存数据。否则的话，考虑创建一个 fragment。

[[composite]]
== 使用复合组件

下面的示例中，`ColorComponent` 组件通过组合 `ColorPicker` 和 xref:vc/html-components/span.adoc[span] 实现。其中 `ColorPicker` 是在 xref:vc/creating-components/using-element-api.adoc[] 部分创建的。span 用于显示文本。

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/component/ColorComponent.java[tags=composite-component]
----
<1> `Composite` 基类使用根组件类型作为泛型参数。
<2> 根组件可以通过 `getContent()` 方法获取。
<3> 当第一次请求该复合组件的内容时，会调用 `initContent()` 方法。此方法应当初始化复合组件的组件结构，并返回根组件。默认情况下，此方法使用反射根据子类的泛型类型实例化组件。
<4> 复合组件的公共 API委托给 `colorPicker` 组件实现。

.视图布局中的复合组件
image::visual-components/creating-components/composite-component.png[align="center", width="150"]

[[custom-field]]
== 使用 CustomField

https://vaadin.com/docs/latest/components/custom-field[CustomField^] 是一个基类，可以将多个组件包装成一个单一输入控件。提供标准输入字段功能，例如标签、帮助文本和验证。可以用来创建自定义输入组件。

上面的示例可以用 `CustomField` 重写：

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/component/ColorField.java[tags=custom-field]
----

组件实现完成后，可以在视图中使用，示例：

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/customcomponent/compositecomponent/CompositeComponentView.java[tags=composite-component-view;!composite-component]
----

.视图布局中的 CustomField
image::visual-components/creating-components/custom-field.png[align="center", width="150"]
