= codeEditor
:page-aliases: vcl/components/source-code-editor.adoc

++++
<div class="jmix-ui-live-demo-container">
    <a href="https://demo.jmix.ru/ui-samples/sample/code-editor-simple" class="live-demo-btn" target="_blank">ДЕМОНСТРАЦИЯ</a>
</div>
++++

`codeEditor` - это компонент для отображения и ввода исходного кода.

`codeEditor` представляет собой многострочное текстовое поле с подсветкой синтаксиса, опциональным полем печати и боковой панелью с номерами строк.
[cols="1h,6", grid=none]
|===
|XML-элемент
|`codeEditor`
|Java-класс
|`CodeEditor`
|Атрибуты
|xref:vc/common-attributes.adoc#id[id] -
xref:vc/common-attributes.adoc#alignSelf[alignSelf] -
xref:vc/common-attributes.adoc#classNames[classNames] -
xref:vc/common-attributes.adoc#colspan[colspan] -
xref:vc/common-attributes.adoc#css[css] -
xref:vc/common-attributes.adoc#dataContainer[dataContainer] -
xref:vc/common-attributes.adoc#enabled[enabled] -
xref:vc/common-attributes.adoc#errorMessage[errorMessage] -
xref:vc/common-attributes.adoc#focusShortcut[focusShortcut] -
<<fontSize,fontSize>> -
xref:vc/common-attributes.adoc#height[height] -
xref:vc/common-attributes.adoc#helperText[helperText] -
<<highlightActiveLine,highlightActiveLine>> -
<<highlightGutterLine,highlightGutterLine>> -
xref:vc/common-attributes.adoc#label[label] -
xref:vc/common-attributes.adoc#maxHeight[maxHeight] -
xref:vc/common-attributes.adoc#maxWidth[maxWidth] -
xref:vc/common-attributes.adoc#minHeight[minHeight] -
xref:vc/common-attributes.adoc#minWidth[minWidth] -
<<mode,mode>> -
<<printMarginColumn,printMarginColumn>> -
xref:vc/common-attributes.adoc#property[property] -
xref:vc/common-attributes.adoc#readOnly[readOnly] -
xref:vc/common-attributes.adoc#required[required] -
xref:vc/common-attributes.adoc#requiredMessage[requiredMessage] -
<<showGutter,showGutter>> -
<<showLineNumbers,showLineNumbers>> -
<<showPrintMargin,showPrintMargin>> -
xref:vc/common-attributes.adoc#tabIndex[tabIndex] -
<<textWrap,textWrap>> -
<<theme,theme>> -
xref:vc/common-attributes.adoc#title[title] -
<<useSoftTabs,useSoftTabs>> -
xref:vc/common-attributes.adoc#visible[visible] -
xref:vc/common-attributes.adoc#width[width]
|Обработчики
|xref:vc/common-handlers.adoc#AttachEvent[AttachEvent] -
xref:vc/common-handlers.adoc#BlurEvent[BlurEvent] -
xref:vc/common-handlers.adoc#ClientValidatedEvent[ClientValidatedEvent] -
xref:vc/common-handlers.adoc#ComponentValueChangeEvent[ComponentValueChangeEvent] -
xref:vc/common-handlers.adoc#CompositionEndEvent[CompositionEndEvent] -
xref:vc/common-handlers.adoc#CompositionStartEvent[CompositionStartEvent] -
xref:vc/common-handlers.adoc#CompositionUpdateEvent[CompositionUpdateEvent] -
xref:vc/common-handlers.adoc#DetachEvent[DetachEvent] -
xref:vc/common-handlers.adoc#FocusEvent[FocusEvent] -
xref:vc/common-handlers.adoc#InputEvent[InputEvent] -
xref:vc/common-handlers.adoc#KeyDownEvent[KeyDownEvent] -
xref:vc/common-handlers.adoc#KeyPressEvent[KeyPressEvent] -
xref:vc/common-handlers.adoc#KeyUpEvent[KeyUpEvent] -
xref:vc/common-handlers.adoc#statusChangeHandler[statusChangeHandler] -
xref:vc/components/textField.adoc#validator[validator]
|Элементы
|xref:vc/components/tooltip.adoc[tooltip] -
<<validation,validator>>
|===

== Основы

Пример использования `codeEditor`:

[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/codeeditor/code-editor-view.xml[tags=basics]
----

image::visual-components/components/code-editor-basics.png[align="center", width="600"]

== Привязка данных

Привязка данных означает связывание визуального компонента с xref:data/data-containers.adoc[контейнером данных]. Изменения в визуальном компоненте или соответствующем контейнере данных могут вызывать обновления друг друга. Смотрите xref:flow-ui:data/data-examples.adoc[Использование компонентов данных] для получения дополнительной информации.

Следующий пример создает `codeEditor`, связанный с данными.

[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/codeeditor/code-editor-view.xml[tags=data-aware]
----
<1> `InstanceContainer` для сущности `OrderReport`.
<2> Встроенный план выборки экземпляра сущности, находящегося в контейнере.
<3> Привязка компонента к контейнеру данных и свойству. Атрибут `dataContainer` содержит ссылку на контейнер данных `orderReportDc`, а атрибут `property` ссылается на атрибут сущности `code`.

[[about-mode]]
== Режим отображения кода
++++
<div class="jmix-ui-live-demo-container">
    <a href="https://demo.jmix.ru/ui-samples/sample/code-editor-mode-theme" class="live-demo-btn" target="_blank">ДЕМОНСТРАЦИЯ</a>
</div>
++++

Атрибут `mode` указывает язык программирования или язык разметки, для которого должен быть настроен редактор. Эта настройка определяет подсветку синтаксиса, соответствующую выбранному языку.

По умолчанию режим подсветки синтаксиса - `CodeEditorMode.PLAIN_TEXT`.

Пример:

[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/codeeditor/code-editor-view.xml[tags=mode]
----

В этом примере атрибут `mode` установлен в значение `JAVASCRIPT`, что настраивает редактор для кода JavaScript.

[[about-theme]]
== Тематический стиль

++++
<div class="jmix-ui-live-demo-container">
    <a href="https://demo.jmix.ru/ui-samples/sample/code-editor-mode-theme" class="live-demo-btn" target="_blank">ДЕМОНСТРАЦИЯ</a>
</div>
++++

Атрибут `theme` используется для определения визуального оформления и стиля редактора. Он позволяет выбрать предопределенную тему, которая изменяет цветовую схему, шрифт и другие эстетические элементы редактора кода.

Список поддерживаемых тем определяется в перечислении `CodeEditorTheme`.

[[validation]]
== Валидация

Чтобы проверить значения, введенные в компонент `codeEditor` вы можете использовать xref:vc/miscellaneous/validator.adoc[валидатор] в элементе `validators`.

Доступны следующие предопределенные валидаторы для `codeEditor`:

[cols="1h,6", grid=none]
|===
|XML-элемент
|`validators`
|Предопределенные валидаторы
|xref:vc/miscellaneous/validator.adoc#custom-validator[custom] - xref:vc/miscellaneous/validator.adoc#EmailValidator[email] - xref:vc/miscellaneous/validator.adoc#NotBlankValidator[notBlank] - xref:vc/miscellaneous/validator.adoc#NotEmptyValidator[notEmpty] - xref:vc/miscellaneous/validator.adoc#NotNullValidator[notNull] - xref:vc/miscellaneous/validator.adoc#RegexpValidator[regexp] - xref:vc/miscellaneous/validator.adoc#SizeValidator[size]
|===

== Атрибуты

В Jmix есть множество xref:vc/common-attributes.adoc[общих атрибутов], которые выполняют одну и ту же функцию для всех компонентов.

Ниже приведены атрибуты, специфичные для `codeEditor`:

[cols="1h,5,1", grid=rows, frame=none]
|===
|*Название*
|*Описание*
|*Значение по умолчанию*
|[[fontSize]]fontSize
|Устанавливает размер шрифта для кода в редакторе.
|`1rem`
|[[highlightActiveLine]]highlightActiveLine
|Устанавливает выделение активной строки. Если выделение включено, строка, на которой находится курсор, будет выделена.
|`true`
|[[highlightGutterLine]]highlightGutterLine
|Устанавливает выделение текущей строки в боковой панели с номерами строк. Если выделение включено, строка в боковой панели, на которой находится курсор, будет выделена.
|`true`
|[[mode]]mode
|Устанавливает подсветку синтаксиса для определенного режима. Список поддерживаемых режимов определяется в перечислении `CodeEditorMode`. Смотрите <<about-mode, Режим отображения кода>>.
|`CodeEditorMode.PLAIN_TEXT`
|[[printMarginColumn]]printMarginColumn
|Управляет положением колонки отступа для печати. Эта колонка представляет собой визуальную вертикальную линию, которая помогает с форматированием кода и его удобочитаемостью, особенно при печати.
|`80`
|[[showGutter]]showGutter
|Определяет, отображается ли боковая панель (вертикальная область слева от редактора). Боковая панель обычно показывает номера строк, что упрощает навигацию и ссылку на конкретные строки в коде.
|`true`
|[[showLineNumbers]]showLineNumbers
|Управляет отображением номеров строк в редакторе. Эта функция помогает с навигацией и ссылкой на конкретные строки в коде.
|`true`
|[[showPrintMargin]]showPrintMargin
|Используется для управления видимостью линии отступа для печати. Эта линия представляет собой вертикальную направляющую, которая появляется в редакторе кода и помогает разработчикам визуально разделить код, который поместится на печатной странице, от кода, который будет обрезан.
|`true`
|[[textWrap]]textWrap
|Определяет, должны ли длинные строки кода переноситься (разбиваться на несколько строк), чтобы поместиться в видимую область редактора, или же они должны отображаться как одна строка, которая выходит за пределы ширины окна.
|`false`
|[[theme]]theme
|Устанавливает визуальную тему редактора кода. Смотрите <<about-theme,Тематический стиль>>.
|`CodeEditorTheme.TEXTMATE`
|[[useSoftTabs]]useSoftTabs
|Устанавливает режим представления символа табуляции. В режиме мягких табуляций символ табуляции отображается как серия пробелов. В режиме жестких табуляций символ табуляции отображается как специальный символ `\t`.
|`true`
|===