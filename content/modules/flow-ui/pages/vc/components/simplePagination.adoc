= simplePagination 简单分页器
:page-aliases: vcl/components/pagination.adoc, vcl/components/simple-pagination.adoc

++++
<div class="jmix-ui-live-demo-container">
    <a href="https://demo.jmix.io/ui-samples/sample/simple-pagination-simple" class="live-demo-btn" target="_blank">在线示例</a>
</div>
++++

`simplePagination` 是一个分页加载数据的组件。可以在 xref:flow-ui:vc/components/dataGrid.adoc[dataGrid] 和 xref:flow-ui:vc/components/treeDataGrid.adoc[treeDataGrid] 组件使用。

* XML 元素：`simplePagination`

* Java 类：`SimplePagination`

== 基本用法

`simplePagination` 的外观很简单，包含行数和导航按钮。

也可以带包含每页条数的 <<items-per-page,下拉列表>>。

image::visual-components/components/simple-pagination.png[align="center", width="818"]

Jmix Studio 在为实体创建 xref:flow-ui:views/views.adoc#standard-list-view[StandardListView] 时，默认生成 `simplePagination`。

[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/simplepagination/simple-pagination-view.xml[tags=data;layout;basics]
----
<1> 定义 xref:flow-ui:data/data-loaders.adoc[集合加载器] 加载 `User` 实体。
<2> 将 `simplePagination` 与 `dataLoader` 连接。

[[items-per-page]]
== Items per Page

[[itemsPerPageVisible]]
`simplePagination` 有一个特殊的 `comboBox` 提供选项可以限制每页展示的条数。设置 `itemsPerPageVisible` 属性为 `true` 可以显示。默认值为 `false`。

image::visual-components/components/items-per-page.png[align="center", width="264"]

该列表的默认值通过 xref:flow-ui:ui-properties.adoc#jmix.ui.component.pagination-items-per-page-items[jmix.ui.component.pagination-items-per-page-items] 属性配置。

[[itemsPerPageItems]]
也可以通过 `itemsPerPageItems` 属性配置自定义的选项列表。属性值必须是逗号分隔的选项：

[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/simplepagination/simple-pagination-view.xml[tags=itemsPerPageItems]
----

小于等于 `0` 的选项会被忽略。大于实体 <<max-fetch-size,最大加载数>> 的选项会用该值替换。

[[itemsPerPageDefaultValue]]
使用 `itemsPerPageDefaultValue` 属性设置选项的默认值：

[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/simplepagination/simple-pagination-view.xml[tags=itemsPerPageDefaultValue]
----

[[itemsPerPageUnlimitedItemVisible]]
`itemsPerPageUnlimitedItemVisible` 属性设置是否在每页显示数量的下拉列表中显示无限制（null）选项。默认值为 `true`。

当在 `comboBox` 中选择 null 选项时，组件会尝试在当前最大加载数的限制下加载所有数据。

[[max-fetch-size]]
[NOTE]
====
所有实体的最大加载数是通过 xref:flow-ui:ui-properties.adoc#jmix.ui.default-max-fetch-size[jmix.ui.default-max-fetch-size] UI 属性定义。默认值为 10000。某些特定实体可能有不同的加载要求，可以用 xref:flow-ui:ui-properties.adoc#jmix.ui.entity-max-fetch-size[jmix.ui.entity-max-fetch-size] 设置。
====

== XML 属性

xref:vc/common-attributes.adoc#id[id] -
xref:vc/common-attributes.adoc#alignSelf[alignSelf] -
<<autoLoad,autoLoad>> -
xref:vc/common-attributes.adoc#classNames[classNames] -
xref:vc/common-attributes.adoc#colspan[colspan] -
xref:vc/common-attributes.adoc#css[css] -
<<dataLoader,dataLoader>> -
<<itemsPerPageDefaultValue,itemsPerPageDefaultValue>> -
<<itemsPerPageItems,itemsPerPageItems>> -
<<itemsPerPageUnlimitedItemVisible,itemsPerPageUnlimitedItemVisible>> -
<<itemsPerPageVisible,itemsPerPageVisible>> -
xref:vc/common-attributes.adoc#visible[visible]

[[autoLoad]]
=== autoLoad

`autoLoad` 属性可以设置是否自动加载数据的数量。当 `autoLoad` 禁用时，组件不知道数据的总量，从而显示一个 `[?]` 按钮。启用时，组件会组织一个查询语句获取数据总量并显示。默认值为 `false`。

[[dataLoader]]
=== dataLoader

用 `dataLoader` 属性为 `simplePagination` 连接数据。

== 事件和处理器

<<AfterRefreshEvent,AfterRefreshEvent>> -
xref:vc/common-handlers.adoc#AttachEvent[AttachEvent] -
<<BeforeRefreshEvent,BeforeRefreshEvent>> -
xref:vc/common-handlers.adoc#DetachEvent[DetachEvent] -
<<totalCountDelegate,totalCountDelegate>>

include::../handler-generation-tip.adoc[]

[[AfterRefreshEvent]]
=== AfterRefreshEvent

`io.jmix.flowui.component.PaginationComponent.AfterRefreshEvent` 在刷新后发送。

[[BeforeRefreshEvent]]
=== BeforeRefreshEvent

`io.jmix.flowui.component.PaginationComponent.BeforeRefreshEvent` 在用户点击下一页、前一页等操作而还没有刷新数据时发送。可以通过调用 `preventRefresh()` 方法阻止数据容器更新。示例：

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/component/simplepagination/SimplePaginationView.java[tags=BeforeRefreshEvent]
----
<1> 检查数据加载器中的实例数量。
<2> 阻止刷新数据。

[[totalCountDelegate]]
=== totalCountDelegate

设置获取数据总量的代理。示例：

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/component/simplepagination/SimplePaginationView.java[tags=dataManager;totalCountDelegate]
----
