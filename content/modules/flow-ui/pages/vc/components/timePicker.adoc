= timePicker 时间选择
:page-aliases: vcl/components/time-field.adoc

++++
<div class="jmix-ui-live-demo-container">
    <a href="https://demo.jmix.io/ui-samples/sample/time-picker-simple" class="live-demo-btn" target="_blank">在线示例</a>
</div>
++++

`timePicker` 支持用户输入或选择时间。

* XML 元素：`timePicker`

* Java 类：`TypedTimePicker`

== 基本用法

时间可以直接通过键盘输入，或者在带有时间列表的弹窗选择。当点击控件或时钟按钮时，会显示弹窗。

image::visual-components/components/time-picker-basic.png[align="center", width="200"]

下面的示例定义了带标签的 `localTime` 类型的 `timePicker`：

[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/timepicker/time-picker-view.xml[tags=basics]
----

== 数据类型

`timePicker` 是一个带类型的组件，支持通用的时间类型：

* `localTime`
* `offsetTime`
* `time`

如需修改类型，使用 xref:vc/common-attributes.adoc#datatype[datatype] 属性。

== 间隔

弹窗中显示时间的默认间隔为 1 小时。通过 xref:vc/common-attributes.adoc#step[step] 属性可以自定义间隔。

image::visual-components/components/time-picker-step.png[align="center", width="230"]

[source,xml,indent=0]
----
include::example$onboarding/src/main/resources/com/company/onboarding/view/component/timepicker/time-picker-view.xml[tags=step]
----

设置的时间间隔必须能整除一小时或一天。例如，“15分钟”、“30分钟”、“2小时” 都是有效的间隔；而 “42分钟” 则不是。

NOTE: 弹窗不会显示小于 15 分钟的间隔，是为了避免无效的时间选取。

// == Time Format
// //todo: make changes upon completing jmix#858 ticket
// The default date and time format in the application is defined by the xref:data-model:data-types.adoc#localized-format-strings[localized format strings]. To use a different format, add your own format strings to the message bundle.

[[themeVariants]]
== 样式版本

通过 xref:vc/common-attributes.adoc#themeNames[themeNames] 属性调整文本对齐方式、帮助文本显示位置以及组件的大小。

=== 对齐

有三个选项：`align-left`（默认）、`align-right`、`align-center`。

image::visual-components/components/time-picker-alignment.png[align="center", width="616"]

.XML 代码
[%collapsible]
====
[source,xml,indent=0]
----
include::example$onboarding/src/main/resources/com/company/onboarding/view/component/timepicker/time-picker-view.xml[tags=alignment]
----
====

=== 帮助文本显示位置

设置 `helper-above-field` 可以将帮助文本从默认的组件下方显示位置移至组件上方。

image::visual-components/components/time-picker-helper-text-position.png[align="center", width="406"]

.XML 代码
[%collapsible]
====
[source,xml,indent=0]
----
include::example$onboarding/src/main/resources/com/company/onboarding/view/component/timepicker/time-picker-view.xml[tags=helper-text-position]
----
====

=== 尺寸

有两个选项：默认大小和 `small`。

image::visual-components/components/time-picker-size.png[align="center", width="384"]

.XML 代码
[%collapsible]
====
[source,xml,indent=0]
----
include::example$onboarding/src/main/resources/com/company/onboarding/view/component/timepicker/time-picker-view.xml[tags=size]
----
====

== 时间范围

如需将用户的输入控制在某个特定的时间范围内，使用 <<max, max>> 和 <<min,min>> 属性指定组件的最大最小值。

[source,xml,indent=0]
----
include::example$onboarding/src/main/resources/com/company/onboarding/view/component/timepicker/time-picker-view.xml[tags=range]
----

还可以设置 <<validator, validator>> 检查=是否符合某个特定的=时间范围。

== XML 属性

xref:vc/common-attributes.adoc#id[id] -
xref:vc/common-attributes.adoc#alignSelf[alignSelf] -
xref:vc/common-attributes.adoc#allowedCharPattern[allowedCharPattern] -
xref:vc/common-attributes.adoc#ariaLabel[ariaLabel] -
xref:vc/common-attributes.adoc#ariaLabelledBy[ariaLabelledBy] -
<<autoOpen, autoOpen>> -
xref:vc/common-attributes.adoc#classNames[classNames] -
xref:vc/common-attributes.adoc#clearButtonVisible[clearButtonVisible] -
xref:vc/common-attributes.adoc#colspan[colspan] -
xref:vc/common-attributes.adoc#css[css] -
xref:vc/common-attributes.adoc#dataContainer[dataContainer] -
xref:vc/common-attributes.adoc#datatype[datatype] -
xref:vc/common-attributes.adoc#enabled[enabled] -
xref:vc/common-attributes.adoc#errorMessage[errorMessage] -
xref:vc/common-attributes.adoc#focusShortcut[focusShortcut] -
xref:vc/common-attributes.adoc#height[height] -
xref:vc/common-attributes.adoc#helperText[helperText] -
xref:vc/common-attributes.adoc#label[label] -
<<max, max>> -
xref:vc/common-attributes.adoc#maxHeight[maxHeight] -
xref:vc/common-attributes.adoc#maxWidth[maxWidth] -
<<min, min>> -
xref:vc/common-attributes.adoc#minHeight[minHeight] -
xref:vc/common-attributes.adoc#minWidth[minWidth] -
xref:vc/common-attributes.adoc#overlayClass[overlayClass] -
xref:vc/common-attributes.adoc#placeholder[placeholder] -
xref:vc/common-attributes.adoc#property[property] -
xref:vc/common-attributes.adoc#readOnly[readOnly] -
xref:vc/common-attributes.adoc#required[required] -
xref:vc/common-attributes.adoc#requiredMessage[requiredMessage] -
xref:vc/common-attributes.adoc#step[step] -
xref:vc/common-attributes.adoc#tabIndex[tabIndex] -
<<themeVariants, themeNames>> -
xref:vc/common-attributes.adoc#visible[visible] -
xref:vc/common-attributes.adoc#width[width]

[[autoOpen]]
=== autoOpen

定义当用户开始使用控件时是否显示弹窗。

* 如果设置为 `true`，当用户输入、点击时钟按钮或控件时会打开弹窗。
* 如果设置为 `false`，仅当用户点击时钟按钮时才会打开弹窗。

[[max]]
=== max

++++
<div class="jmix-ui-live-demo-container">
    <a href="https://vaadin.com/docs/latest/components/time-picker#minimum-maximum-value" class="vaadin-docs-btn" target="_blank">Vaadin</a>
</div>
++++

设置可选择的最大时间。支持格式为 `hh:mm`。

[[min]]
=== min

++++
<div class="jmix-ui-live-demo-container">
    <a href="https://vaadin.com/docs/latest/components/time-picker#minimum-maximum-value" class="vaadin-docs-btn" target="_blank">Vaadin</a>
</div>
++++

设置可选择的最小时间。支持格式为 `hh:mm`。

== 事件和处理器

xref:vc/common-handlers.adoc#AttachEvent[AttachEvent] -
xref:vc/common-handlers.adoc#BlurEvent[BlurEvent] -
<<ClientValidatedEvent, ClientValidatedEvent>> -
xref:vc/common-handlers.adoc#ComponentValueChangeEvent[ComponentValueChangeEvent] -
xref:vc/common-handlers.adoc#DetachEvent[DetachEvent] -
xref:vc/common-handlers.adoc#FocusEvent[FocusEvent] -
<<InvalidChangeEvent, InvalidChangeEvent>> -
xref:vc/common-handlers.adoc#TypedValueChangeEvent[TypedValueChangeEvent] -
xref:vc/common-handlers.adoc#statusChangeHandler[statusChangeHandler] -
<<validator, validator>>

include::../handler-generation-tip.adoc[]

[[ClientValidatedEvent]]
=== ClientValidatedEvent

`ClientValidatedEvent` 当在客户端完成数据验证时发送。

[[InvalidChangeEvent]]
=== InvalidChangeEvent

当组件的 xref:vc/common-attributes.adoc#invalid[invalid] 属性发生变化时发送 `com.vaadin.flow.component.timepicker.TimePicker.InvalidChangeEvent`。

[[validator]]
=== validator

为组件添加 xref:vc/miscellaneous/validator.adoc[validator] 实例。当值无效时，验证器需要抛出 `ValidationException` 异常。示例：

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/component/timepicker/TimePickerView.java[tags=validator]
----

== XML 内部元素

xref:vc/components/tooltip.adoc[tooltip] -
xref:vc/miscellaneous/validator.adoc[validator] -
xref:vc/miscellaneous/prefix-suffix.adoc[prefix]

== 参考

{vaadin-docs}/components/time-picker[Vaadin 文档^]
