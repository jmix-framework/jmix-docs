= select

++++
<div class="jmix-ui-live-demo-container">
    <a href="https://demo.jmix.ru/ui-samples/sample/select-simple" class="live-demo-btn" target="_blank">ДЕМОНСТРАЦИЯ</a>
</div>
++++

`select` позволяет пользователям выбрать одно значение из списка элементов, представленного в оверлее.

[cols="1h,6", grid=none]
|===
|XML-элемент
|`select`
|Java-класс
|`JmixSelect`
|Атрибуты
|xref:vc/common-attributes.adoc#id[id] -
xref:vc/common-attributes.adoc#alignSelf[alignSelf] -
xref:vc/common-attributes.adoc#ariaLabel[ariaLabel] -
xref:vc/common-attributes.adoc#ariaLabelledBy[ariaLabelledBy] -
xref:vc/common-attributes.adoc#autofocus[autofocus] -
xref:vc/common-attributes.adoc#classNames[classNames] -
xref:vc/common-attributes.adoc#colspan[colspan] -
xref:vc/common-attributes.adoc#css[css] -
xref:vc/common-attributes.adoc#dataContainer[dataContainer] -
xref:vc/common-attributes.adoc#datatype[datatype] -
<<emptySelectionAllowed,emptySelectionAllowed>> -
<<emptySelectionCaption,emptySelectionCaption>> -
xref:vc/common-attributes.adoc#enabled[enabled] -
xref:vc/common-attributes.adoc#errorMessage[errorMessage] -
xref:vc/common-attributes.adoc#focusShortcut[focusShortcut] -
xref:vc/common-attributes.adoc#height[height] -
xref:vc/common-attributes.adoc#helperText[helperText] -
<<itemsContainer,itemsContainer>> -
<<itemsEnum,itemsEnum>> -
xref:vc/common-attributes.adoc#label[label] -
xref:vc/common-attributes.adoc#maxHeight[maxHeight] -
xref:vc/common-attributes.adoc#maxWidth[maxWidth] -
xref:vc/common-attributes.adoc#minHeight[minHeight] -
xref:vc/common-attributes.adoc#minWidth[minWidth] -
<<overlayClass,overlayClass>> -
xref:vc/common-attributes.adoc#placeholder[placeholder] -
xref:vc/common-attributes.adoc#property[property] -
xref:vc/common-attributes.adoc#readOnly[readOnly] -
xref:vc/common-attributes.adoc#required[required] -
xref:vc/common-attributes.adoc#requiredMessage[requiredMessage] -
xref:vc/common-attributes.adoc#tabIndex[tabIndex] -
<<theme-variants,themeNames>> -
xref:vc/common-attributes.adoc#visible[visible] -
xref:vc/common-attributes.adoc#width[width]
|Обработчики
|xref:vc/common-handlers.adoc#AttachEvent[AttachEvent] -
xref:vc/common-handlers.adoc#BlurEvent[BlurEvent] -
xref:vc/common-handlers.adoc#ClientValidatedEvent[ClientValidatedEvent] -
xref:vc/common-handlers.adoc#ComponentValueChangeEvent[ComponentValueChangeEvent] -
xref:vc/common-handlers.adoc#DetachEvent[DetachEvent] -
xref:vc/common-handlers.adoc#FocusEvent[FocusEvent] -
<<InvalidChangeEvent,InvalidChangeEvent>> -
<<OpenedChangeEvent,OpenedChangeEvent>> -
<<itemEnabledProvider,itemEnabledProvider>> -
<<itemLabelGenerator,itemLabelGenerator>> -
<<rendering-items,renderer>> -
xref:vc/common-handlers.adoc#statusChangeHandler[statusChangeHandler] -
<<textRenderer,textRenderer>> -
xref:vc/components/textField.adoc#validator[validator]
|Элементы
|<<fragment-renderer,fragmentRenderer>> -
xref:vc/miscellaneous/prefix-suffix.adoc[prefix] -
xref:vc/components/tooltip.adoc[tooltip]
|===

== Основы

`select` похож на xref:flow-ui:vc/components/comboBox.adoc[comboBox].

Используйте `select`, когда:

* Вам не нужны пользовательский ввод и фильтрация элементов.
* Список должен быть компактным. Это может быть полезно, если список элементов слишком длинный для xref:flow-ui:vc/components/radioButtonGroup.adoc[radioButtonGroup].

Простейший случай использования `select` - это выбор значения из перечисления:

[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/select/select-view.xml[tags=basics]
----

image::visual-components/components/select-basics.png[align="center", width="278"]

[[data-binding]]
== Привязка данных

++++
<div class="jmix-ui-live-demo-container">
    <a href="https://demo.jmix.ru/ui-samples/sample/select-dataaware" class="live-demo-btn" target="_blank">ДЕМОНСТРАЦИЯ</a>
</div>
++++

Привязка данных означает связывание визуального компонента с xref:data/data-containers.adoc[контейнером данных]. Изменения в визуальном компоненте или соответствующем контейнере данных могут вызывать обновления друг друга. Смотрите xref:flow-ui:data/data-examples.adoc[Использование компонентов данных] для получения дополнительной информации.

По умолчанию Jmix Studio генерирует `select` при создании экрана деталей сущности с атрибутом типа перечисления. Например, сущность `User` имеет атрибут `onboardingStatus` типа `OnboardingStatus`, который является перечислением.

[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/user/user-detail-view-with-select.xml[tags=data;layout;select]
----

В следующем примере показано, как использовать компонент `select` для выбора отдела, к которому принадлежит пользователь:

[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/select/select-view.xml[tags=data;layout;data-bind]
----
<1> Контейнер данных для хранения экземпляра `User`, который в данный момент редактируется.
<2> План выборки расширен для получения коллекции экземпляров `Department`, которые будут доступны для выбора.
<3> Контейнер данных для хранения коллекции всех существующих экземпляров `Department`.
<4> Координатор загрузки данных для автоматического предоставления компоненту экземпляров для выбора.
<5> Привязка компонента к контейнеру данных и свойству. Указание коллекции экземпляров для выбора с использованием атрибута `itemsContainer`.

[[building-items]]
== Формирование списка опций

Для установки списка элементов `select` используйте следующие методы:

[[items-list]]
=== Список элементов

[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/select/select-view.xml[tags=items-list]
----

Метод `setItems()` позволяет вам программно задать элементы компонента.

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/component/select/SelectView.java[tags=items-list;onInit]
----

[[items-map]]
=== Список элементов с описаниями

[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/select/select-view.xml[tags=items-map]
----

`ComponentUtils.setItemsMap()` позволяет вам явно указать строковое описание для каждого значения элемента.

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/component/select/SelectView.java[tags=items-map;onInit]
----

[[items-enum]]
=== Список значений перечисления

Вы можете использовать либо декларативный, либо программный подход для установки значений перечисления в качестве элементов `select`.

В следующем примере показан декларативный подход.

[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/select/select-view.xml[tags=items-enum]
----

Пример ниже использует программный подход.

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/component/select/SelectView.java[tags=items-enum;onInit]
----

[[disabled-items]]
== Неактивные элементы списка

Элементы списка могут быть отключены, чтобы указать, что они недоступны для выбора, но могут быть выбраны при других условиях.

`itemEnabledProvider` позволяет динамически управлять состоянием включения отдельных элементов в зависимости от определенных условий. Отключенные элементы отображаются серым цветом и не могут быть выбраны пользователем. По умолчанию все элементы включены.

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/component/select/SelectView.java[tags=itemEnabledProvider]
----

[[empty-selection-item]]
== Элемент пустого выбора

Компонент `select` предоставляет возможность отображать элемент пустого выбора, что полезно в случаях, где требуется значение по умолчанию или состояние "отсутствия выбора".

Атрибут `emptySelectionAllowed` устанавливает, разрешено ли пользователю ничего не выбирать. При установке значения `true` пользователю показывается специальный пустой элемент.

Элемент пустого выбора можно настроить с помощью атрибута <<emptySelectionCaption,emptySelectionCaption>>.

[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/select/select-view.xml[tags=emptySelectionAllowed]
----

Атрибут `emptySelectionCaption` задаёт подпись для пустого выбора, когда <<emptySelectionAllowed,emptySelectionAllowed = true>>. Эта подпись отображается для элемента пустого выбора в выпадающем списке.

Когда выбран элемент пустого выбора, `select` отображает значение, предоставленное xref:vc/components/comboBox.adoc#itemLabelGenerator[itemLabelGenerator] для нулевого элемента, или строку, установленную атрибутом xref:vc/common-attributes.adoc#placeholder[placeholder], или пустую строку, если `placeholder` не установлен.

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/component/select/SelectView.java[tags=emptySelectionAllowed]
----

[[customizing-item-labels]]
== Настройка отображения элементов

`itemLabelGenerator` позволяет вам настроить способ отображения элементов в выпадающем списке. Это даёт вам контроль над текстом, который видят пользователи, позволяя вам представлять информацию более удобным для пользователя или контекстно-зависимым способом.

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/component/select/SelectView.java[tags=itemLabelGenerator]
----

`itemLabelGenerator` управляет как метками для каждого элемента в выпадающем списке, так и текстом, отображаемым в поле ввода компонента `select`, когда выбран элемент.

`textRenderer` управляет метками, отображаемыми в выпадающем списке для каждого элемента.

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/component/select/SelectView.java[tags=textRenderer]
----

NOTE: `textRenderer` не влияет на текст, отображаемый в поле ввода компонента `select` после выбора элемента.

Используйте, когда вы хотите настроить метки, отображаемые в выпадающем списке. Это полезно для повышения ясности, добавления дополнительной информации или адаптации меток на основе свойств выбранного объекта.

[[rendering-items]]
== Рендеринг элементов

Можно настроить рендеринг элементов. Рендерер применяется к каждому элементу для создания компонента, который представляет этот элемент.

Для этого можно использовать метод `setRenderer()` или аннотацию `@Supply`.

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/component/select/SelectView.java[tags=autowired;renderer]
----

[[fragment-renderer]]
В качестве альтернативы вы можете отображать элементы, используя вложенный элемент `fragmentRenderer`. Дополнительную информацию смотрите в разделе xref:flow-ui:vc/miscellaneous/renderers.adoc#fragment-renderer[Рендерер фрагментов].

[[overlay]]
== Оверлей

Оверлей - это полупрозрачный или непрозрачный слой, который используется для создания выпадающего списка элементов.

Атрибут `overlayClass` позволяет вам добавлять пользовательские CSS-классы к элементу оверлея.

[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/select/select-view.xml[tags=overlay]
----

Определите свой собственный стиль в вашем CSS-файле:

[source,css,indent=0]
----
include::example$/onboarding/frontend/themes/onboarding/onboarding.css[tags=overlay-select]
----

[[theme-variants]]
== Варианты оформления

Используйте атрибут xref:vc/common-attributes.adoc#themeNames[themeNames] для настройки выравнивания текста, размещения подсказки и размера компонента.

[[alignment]]
*Выравнивание*

Выберите один из трёх вариантов выравнивания: `align-left` (по умолчанию), `align-right` (по правому краю), `align-center` (по центру).

image::visual-components/components/select-alignment.png[align="center", width="621"]

.XML code
[%collapsible]
====
[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/select/select-view.xml[tags=themeNames-align]
----
====

[[helper-text-position]]
*Позиция подсказки*

Установив `helper-above-field`, вы переместите подсказку с её стандартного положения под полем на позицию над ним.

image::visual-components/components/select-helper-above-field.png[align="center", width="411"]

.XML code
[%collapsible]
====
[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/select/select-view.xml[tags=themeNames-helper-above-field]
----
====

[[size]]
*Размер*

Доступны два варианта размера: размер по умолчанию и `small`.

image::visual-components/components/select-size.png[align="center", width="395"]

.XML code
[%collapsible]
====
[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/select/select-view.xml[tags=themeNames-size]
----
====

== Атрибуты

В Jmix есть множество xref:vc/common-attributes.adoc[общих атрибутов], которые выполняют одну и ту же функцию для всех компонентов.

Ниже приведены атрибуты, специфичные для `select`:

[cols="1h,5,1", grid=rows, frame=none]
|===
|*Название*
|*Описание*
|*Значение по умолчанию*
|[[emptySelectionAllowed]]emptySelectionAllowed
|Устанавливает, разрешено ли пользователю ничего не выбирать в списке. Смотрите <<empty-selection-item,Элемент пустого выбора>>.
|`false`
|[[emptySelectionCaption]]emptySelectionCaption
|Задаёт подпись для пустого элемента, когда `emptySelectionAllowed = true`. Смотрите <<empty-selection-item,Элемент пустого выбора>>.
|Пустая строка ""
|[[itemsContainer]]itemsContainer
|Определяет контейнер данных, содержащий список элементов. Компонент отображает имя экземпляра сущности. Смотрите второй пример в разделе <<data-binding,Привязка данных>>.
|
|[[itemsEnum]]itemsEnum
|Определяет класс перечисления для создания списка элементов. Смотрите <<items-enum,Список значений перечисления>>.
|
|[[overlayClass]]overlayClass
|Определяет список имён CSS-классов, разделённых пробелами, для установки на элементе оверлея. Смотрите <<overlay, Оверлей>>.
|
|===

== Обработчики

В Jmix существует множество xref:vc/common-handlers.adoc[общих обработчиков], которые конфигурируются одинаково для всех компонентов.

Ниже приведены обработчики, специфичные для `select`.

include::../handler-generation-tip.adoc[]

[cols="1h,6", grid=rows, frame=none]
|===
|*Название*
|*Описание*
|[[InvalidChangeEvent]]InvalidChangeEvent
|`com.vaadin.flow.component.select.Select.InvalidChangeEvent` отправляется, когда меняется состояние xref:flow-ui:vc/common-attributes.adoc#invalid[invalid].
|[[OpenedChangeEvent]]OpenedChangeEvent
|`com.vaadin.flow.component.select.Select.OpenedChangeEvent` отправляется, когда меняется состояние оверлея `opened`.
|[[itemEnabledProvider]]itemEnabledProvider
|`itemEnabledProvider` применяется к каждому элементу этого `select`, чтобы определить, должен ли элемент быть включён (`true`) или отключён (`false`). Смотрите <<disabled-items,Неактивные элементы списка>>.
|[[itemLabelGenerator]]itemLabelGenerator
|Позволяет вам настроить метки, отображаемые для каждого элемента. Смотрите <<customizing-item-labels,Настройка отображения элементов>>.
|[[renderer]]renderer
|Устанавливает рендерер для этой группы элементов `select`. Рендерер применяется к каждому элементу для создания компонента, который представляет опцию элемента в выпадающем списке `select`. Смотрите <<rendering-items,Рендеринг элементов>>.
|[[textRenderer]]textRenderer
|Это рендерер для преобразования элемента в строку. Смотрите <<customizing-item-labels,Настройка отображения элементов>>.
|===

== Смотрите также

Смотрите {vaadin-docs}/components/select[документацию Vaadin^] для получения дополнительной информации.