= multiValuePicker 多值选择器
:page-aliases: vcl/components/values-picker.adoc

++++
<div class="jmix-ui-live-demo-container">
    <a href="https://demo.jmix.io/ui-samples/sample/value-picker-multi" class="live-demo-btn" target="_blank">在线示例</a>
</div>
++++

`multiValuePicker` 可以处理任意类型值的列表。由文本框和一组由操作定义的按钮组成。
[cols="1h,6", grid=none]
|===
|XML Element
|`multiValuePicker`
|Java Class
|`JmixMultiValuePicker`
|Attributes
|xref:vc/common-attributes.adoc#id[id] -
xref:vc/common-attributes.adoc#alignSelf[alignSelf] -
xref:vc/components/valuePicker.adoc#allowCustomValue[allowCustomValue] -
xref:vc/common-attributes.adoc#ariaLabel[ariaLabel] -
xref:vc/common-attributes.adoc#ariaLabelledBy[ariaLabelledBy] -
xref:vc/common-attributes.adoc#autofocus[autofocus] -
xref:vc/common-attributes.adoc#classNames[classNames] -
xref:vc/common-attributes.adoc#colspan[colspan] -
xref:vc/common-attributes.adoc#css[css] -
xref:vc/common-attributes.adoc#dataContainer[dataContainer] -
xref:vc/common-attributes.adoc#enabled[enabled] -
xref:vc/common-attributes.adoc#focusShortcut[focusShortcut] -
xref:vc/common-attributes.adoc#height[height] -
xref:vc/common-attributes.adoc#helperText[helperText] -
xref:vc/common-attributes.adoc#label[label] -
xref:vc/common-attributes.adoc#maxHeight[maxHeight] -
xref:vc/common-attributes.adoc#maxWidth[maxWidth] -
xref:vc/common-attributes.adoc#minHeight[minHeight] -
xref:vc/common-attributes.adoc#minWidth[minWidth] -
xref:vc/common-attributes.adoc#placeholder[placeholder] -
xref:vc/common-attributes.adoc#property[property] -
xref:vc/common-attributes.adoc#readOnly[readOnly] -
xref:vc/common-attributes.adoc#required[required] -
xref:vc/common-attributes.adoc#requiredMessage[requiredMessage] -
xref:vc/common-attributes.adoc#tabIndex[tabIndex] -
xref:vc/components/comboBox.adoc#theme-variants[themeNames] -
xref:vc/common-attributes.adoc#title[title] -
xref:vc/common-attributes.adoc#visible[visible] -
xref:vc/common-attributes.adoc#width[width]
|Handlers
|xref:vc/common-handlers.adoc#AttachEvent[AttachEvent] -
xref:vc/common-handlers.adoc#BlurEvent[BlurEvent] -
xref:vc/common-handlers.adoc#ComponentValueChangeEvent[ComponentValueChangeEvent] -
xref:vc/components/valuePicker.adoc#CustomValueSetEvent[CustomValueSetEvent] -
xref:vc/common-handlers.adoc#DetachEvent[DetachEvent] -
xref:vc/common-handlers.adoc#FocusEvent[FocusEvent] -
xref:vc/components/valuePicker.adoc#formatter[formatter] -
xref:vc/common-handlers.adoc#statusChangeHandler[statusChangeHandler] -
xref:vc/components/textField.adoc#validator[validator]
|Elements
|<<actions,actions>> -
xref:vc/miscellaneous/formatter.adoc[formatter] -
xref:vc/miscellaneous/prefix-suffix.adoc[prefix] -
xref:vc/miscellaneous/prefix-suffix.adoc[suffix] -
xref:vc/components/tooltip.adoc[tooltip] -
<<validation,validator>>
|===

== 基本用法

`multiValuePicker` is ideal for editing lists of values through actions, rather than typing directly in a text field.

`multiValuePicker` 的基本用法示例：

[[values-picker-example1]]
[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/multivaluepicker/multi-value-picker-view.xml[tags=basics]
----

当用户点击选择按钮时，会展示 *Select Value（选择值）* 视图。用户可以在这个视图中新建或删除值。需要添加值时，可以点击 *Add（添加）* 按钮或按下 *Enter* 添加值。

image::visual-components/components/multi-value-picker.gif[align="center",width="528"]

NOTE: You can create a custom *Select Value* view. This view needs to implement the `MultiValueSelectView` interface and then be set to the `action` as either `viewClass` or `viewId`.

[[actions]]
== 操作

可以给 `multiValuePicker` 添加自定义或预定义的操作，操作作为按钮显示在右侧。有两种方式：

* **XML** 中用内部的 `actions` 元素定义操作。
* **控制器** 中使用 `addAction()` 方法编程式添加。

[TIP]
====
如需在 Jmix Studio 中添加 `action`，可以在视图 XML 或者 *Jmix UI* 结构面板中选择组件，然后点击组件面板的 xref:studio:view-designer.adoc#add-picker-action[Add] 按钮。
====

[[predefined-action]]
=== 预定义操作

框架为 `multiValuePicker` 提供了两种预定义操作：`value_clear` 和 `multi_value_select`。

`multi_value_select` 操作使用一个值选择视图为 `multiValuePicker` 设置值。这个视图会根据提供的数据类型生成一个特定的组件用于选择或创建值。`multi_value_select` 操作可用来选择各种类型的值，包括：

* Java 类型，例如，`String`、`Integer`、`Long`、`Double`、`BigDecimal`、`Date`、`LocalDate`、`LocalTime`、`LocalDateTime`、`OffsetTime`、`OffsetDateTime`、`Date`、`Time`、`UUID` 以及 `java.sql.Date`、`java.sql.Time`。
+
[[java-class]]
用 `javaClass` 属性设置选择值的 Java 类型。
+
例如，在 <<values-picker-example1,上面>> 的示例中，`multi_value_select` 操作使用了 `java.lang.String` Java 类型。

* xref:data-model:enumerations.adoc[枚举] 值
+
[[enum-class]]
用 `enumClass` 属性设置选择值的枚举类型。
+
++++
<div class="jmix-ui-live-demo-container">
    <a href="https://demo.jmix.io/ui-samples/sample/value-picker-multi-enum" class="live-demo-btn" target="_blank">在线示例</a>
</div>
++++
+
[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/multivaluepicker/multi-value-picker-view.xml[tags=enum]
----
+
处理枚举类型的值时，*Select Value（选择值）* 视图会生成 `comboBox`，提供选择枚举值的下拉列表。

* xref:data-model:entities.adoc[实体] 实例
+
++++
<div class="jmix-ui-live-demo-container">
    <a href="https://demo.jmix.io/ui-samples/sample/value-picker-multi-entity" class="live-demo-btn" target="_blank">在线示例</a>
</div>
++++
+
[[entity-name]]
用 `entityName` 属性设置选择值的实体名称。
+
[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/multivaluepicker/multi-value-picker-view.xml[tags=entity]
----
+
[[use-combo-box]]
`useComboBox` 属性指定在值选择视图中是否用 `entityComboBox`。默认为 `false`。

[[custom-actions]]
=== 自定义操作

`multiValuePicker` 的自定义操作与 `valuePicker` 的 xref:flow-ui:vc/components/valuePicker.adoc#custom-actions[自定义操作] 类似。

[[validation]]
== 验证

如需检查 `multiValuePicker` 组件输入的值，可以通过内部元素 `validators` 使用 xref:vc/miscellaneous/validator.adoc[validator]。

下面是 `multiValuePicker` 可以使用的预定义验证器：

[cols="1h,6", grid=none]
|===
|XML 元素
|`validators`
|预定义验证器
|xref:vc/miscellaneous/validator.adoc#custom-validator[custom] - xref:vc/miscellaneous/validator.adoc#DecimalMaxValidator[decimalMax] - xref:vc/miscellaneous/validator.adoc#DecimalMinValidator[decimalMin] - xref:vc/miscellaneous/validator.adoc#DigitsValidator[digits] - xref:vc/miscellaneous/validator.adoc#DoubleMaxValidator[doubleMax] - xref:vc/miscellaneous/validator.adoc#DoubleMinValidator[doubleMin] - xref:vc/miscellaneous/validator.adoc#EmailValidator[email] - xref:vc/miscellaneous/validator.adoc#MaxValidator[max] - xref:vc/miscellaneous/validator.adoc#MinValidator[min] - xref:vc/miscellaneous/validator.adoc#NegativeValidator[negative] - xref:vc/miscellaneous/validator.adoc#NegativeOrZeroValidator[negativeOrZero] - xref:vc/miscellaneous/validator.adoc#NotBlankValidator[notBlank] - xref:vc/miscellaneous/validator.adoc#NotEmptyValidator[notEmpty] - xref:vc/miscellaneous/validator.adoc#NotNullValidator[notNull] - xref:vc/miscellaneous/validator.adoc#PositiveValidator[positive] - xref:vc/miscellaneous/validator.adoc#PositiveOrZeroValidator[positiveOrZero] - xref:vc/miscellaneous/validator.adoc#RegexpValidator[regexp] - xref:vc/miscellaneous/validator.adoc#SizeValidator[size]
|===
