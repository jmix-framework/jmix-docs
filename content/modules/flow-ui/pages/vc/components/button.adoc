= button 按钮
:page-aliases: vcl/components/button.adoc, vcl/components/link-button.adoc

++++
<div class="jmix-ui-live-demo-container">
    <a href="https://demo.jmix.io/ui-samples/sample/button-simple" class="live-demo-btn" target="_blank">在线示例</a>
</div>
++++

用户点击时触发操作。

* XML 元素：`button`

* Java 类：`JmixButton`

== 基本用法

按钮上可以有标题、图标或者两者皆有：

image::visual-components/components/button-1.png[align="center", width="247"]

下面是定义带有标题、图标以及从 xref:localization:message-bundles.adoc[消息包] 中获取文本显示到按钮提示的示例：

[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/button/button-view.xml[tags=basics-1]
----

在视图类中订阅 `ClickEvent` 事件可以处理按钮点击：

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/component/button/ButtonView.java[tags=basics-1]
----

[[action]]
== 操作

除了创建 <<ClickEvent,ClickEvent>> 事件的处理方法外，按钮也可以与一个已有的 xref:actions.adoc[操作] 进行关联。使用已有操作会更有效，这种方式会自动更新按钮的各种属性和行为。包括按钮的状态、可见性、文本、标题、图标以及用户交互输出。

如果操作是视图中定义的，可以通过按钮的 `action` 属性设置操作：

[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/button/button-view.xml[tags=layout;action-1;action-2]
----

如果操作是某个组件定义的，例如 xref:vc/components/dataGrid.adoc[dataGrid]，则需在按钮的 `action` 属性中同时指定组件 id 和操作 id，以 "." 分隔：

[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/button/button-view.xml[tags=layout;action-3]
----

[[variants]]
== 样式版本

++++
<div class="jmix-ui-live-demo-container">
    <a href="https://demo.jmix.io/ui-samples/sample/button-theme-variant" class="live-demo-btn" target="_blank">在线示例</a>
</div>
++++

使用 xref:vc/common-attributes.adoc#themeNames[themeNames] 属性可以为按钮设置某个预定义的样式版本。

* 表示重要：
+
image::visual-components/components/button-variant-1.png[align="center", width="319"]
+
[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/button/button-view.xml[tags=variant-1]
----

* 表示危险或错误：
+
image::visual-components/components/button-variant-2.png[align="center", width="319"]
+
[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/button/button-view.xml[tags=variant-2]
----

* 表示成功：
+
image::visual-components/components/button-variant-3.png[align="center", width="319"]
+
[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/button/button-view.xml[tags=variant-3]
----

* 高对比：
+
image::visual-components/components/button-variant-4.png[align="center", width="319"]
+
[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/button/button-view.xml[tags=variant-4]
----

* 不同大小：
+
image::visual-components/components/button-variant-5.png[align="center", width="319"]
+
[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/button/button-view.xml[tags=variant-5]
----

* 内嵌样式，按钮文字外部无任何空白：
+
image::visual-components/components/button-variant-6.png[align="center", width="119"]
+
[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/button/button-view.xml[tags=variant-6]
----

样式版本的名称定义在 {vaadin-api}/com/vaadin/flow/component/button/ButtonVariant.html[ButtonVariant^] 类中。参阅 {vaadin-docs}/components/button#styles[Vaadin Docs^] 了解更多关于按钮样式的内容。

== XML 属性

xref:vc/common-attributes.adoc#id[id] -
<<action,action>> -
xref:vc/common-attributes.adoc#alignSelf[alignSelf] -
xref:vc/common-attributes.adoc#ariaLabel[ariaLabel] -
xref:vc/common-attributes.adoc#ariaLabelledBy[ariaLabelledBy] -
xref:vc/common-attributes.adoc#autofocus[ariaLabelledBy] -
xref:vc/common-attributes.adoc#autofocus[autofocus] -
xref:vc/common-attributes.adoc#classNames[classNames] -
xref:vc/common-attributes.adoc#css[css] -
<<disable-on-click,disableOnClick>> -
xref:vc/common-attributes.adoc#enabled[enabled] -
xref:vc/common-attributes.adoc#focusShortcut[focusShortcut] -
xref:vc/common-attributes.adoc#height[height] -
<<icon,icon>> -
<<iconAfterText,iconAfterText>> -
xref:vc/common-attributes.adoc#maxHeight[maxHeight] -
xref:vc/common-attributes.adoc#maxWidth[maxWidth] -
xref:vc/common-attributes.adoc#minHeight[minHeight] -
xref:vc/common-attributes.adoc#minWidth[minWidth] -
xref:vc/common-attributes.adoc#tabIndex[tabIndex] -
xref:vc/common-attributes.adoc#text[text] -
xref:vc/common-attributes.adoc#themeNames[themeNames] -
xref:vc/common-attributes.adoc#title[title] -
xref:vc/common-attributes.adoc#visible[visible] -
<<whiteSpace,whiteSpace>> -
xref:vc/common-attributes.adoc#width[width]

[[disable-on-click]]
=== disableOnClick

如果 `disableOnClick` 属性设置成 `true`，这个按钮在点击之后就自动禁用，主要用来防止（意外的）多次点击。之后可以通过调用 `setEnabled(true)` 把按钮恢复成可点击状态。

[[icon]]
=== icon

++++
<div class="jmix-ui-live-demo-container">
    <a href="https://vaadin.com/docs/latest/components/icons" class="vaadin-docs-btn" target="_blank">Vaadin</a>
</div>
++++

支持设置按钮的 `Icon` 组件。默认提供 2 组图标集：

* Lumo 图标。可以在 XML 中设置：
+
[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/button/button-view.xml[tags=lumo-btn]
----
或者在控制器类中：
+
[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/component/button/ButtonView.java[tags=lumoBtn;onInit]
----
* Vaadin 图标。这些图标定义了常量。可以在 XML 中设置：
+
[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/button/button-view.xml[tags=vaadin-btn]
----
或者在控制器类中：
+
[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/component/button/ButtonView.java[tags=vaadinBtn;onInit]
----

由于按钮可以有 xref:vc/miscellaneous/prefix-suffix.adoc[前缀和后缀] 组件，因此可以使用外部图片替代图标。

* xref:vc/html-components/image.adoc[] 组件作为图标：
+
[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/button/button-view.xml[tags=image-icon-btn]
----
<1> 设置宽与 `VaadinIcon` 相同。

+
image::visual-components/components/button-icon-image.png[align="center", width="106"]

* `svgIcon` 组件作为图标：
+
[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/button/button-view.xml[tags=svg-icon-btn]
----

+
image::visual-components/components/button-icon-svg.png[align="center", width="124"]

[[iconAfterText]]
=== iconAfterText

++++
<div class="jmix-ui-live-demo-container">
    <a href="https://vaadin.com/docs/latest/components/button/#buttons-with-icons" class="vaadin-docs-btn" target="_blank">Vaadin</a>
</div>
++++

如果设置 `iconAfterText` 属性为 `true`，按钮的图标会在文字后面显示。

[[whiteSpace]]
=== whiteSpace

++++
<div class="jmix-ui-live-demo-container">
    <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/white-space" class="mdn-docs-btn" target="_blank">MDN</a>
</div>
++++

定义组件的 `white-space` 样式值。支持：

* `NORMAL`
* `NOWRAP`
* `PRE`
* `PRE_WRAP`
* `PRE_LINE`
* `BREAK_SPACES`
* `INHERIT`
* `INITIAL`

== 事件和处理器

xref:vc/common-handlers.adoc#AttachEvent[AttachEvent] -
xref:vc/common-handlers.adoc#BlurEvent[BlurEvent] -
<<ClickEvent,clickListener>> -
<<doubleClickListener,doubleClickListener>> -
<<singleClickListener,singleClickListener>> -
xref:vc/common-handlers.adoc#DetachEvent[DetachEvent] -
xref:vc/common-handlers.adoc#FocusEvent[FocusEvent]

include::../handler-generation-tip.adoc[]

[[ClickEvent]]
=== clickListener

当用户点击组件时触发标题为 `click` 的 `com.vaadin.flow.component.ClickEvent`。

示例：

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/component/button/ButtonView.java[tags=clickListener]
----
<1> `@Subscribe` 注解将处理方法与组件通过组件 id 进行关联。
<2> 如果需要，可以从 event 对象中获取点击的按钮。

如需通过编程的方式注册事件处理器，可以使用组件的 `addClickListener()` 方法。

[[doubleClickListener]]
=== doubleClickListener

当用户在短时间内点击组件两次时触发标题为 `doubleClick` 的 `com.vaadin.flow.component.ClickEvent`。

示例：

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/component/button/ButtonView.java[tags=doubleClickListener]
----

如需以编程的方式注册事件处理器，可以使用组件的 `addDoubleClickListener()` 方法。

[[singleClickListener]]
=== singleClickListener

当用户在单击组件一小段时间后会（确保不是双击）触发标题为 `singleClick` 的 `com.vaadin.flow.component.ClickEvent`。

示例：

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/component/button/ButtonView.java[tags=singleClickListener]
----

如需以编程的方式注册事件处理器，可以使用组件的 `addSingleClickListener()` 方法。

== XML 内部元素

xref:vc/components/tooltip.adoc[tooltip] -
xref:vc/miscellaneous/prefix-suffix.adoc[prefix] -
xref:vc/miscellaneous/prefix-suffix.adoc[suffix]

== 参考

{vaadin-docs}/components/button[Vaadin 文档^]。
