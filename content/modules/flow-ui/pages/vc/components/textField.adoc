= textField 文本框
:page-aliases: vcl/components/currency-field.adoc, vcl/components/text-field.adoc

++++
<div class="jmix-ui-live-demo-container">
    <a href="https://demo.jmix.io/ui-samples/sample/text-field-simple" class="live-demo-btn" target="_blank">在线示例</a>
</div>
++++

是一个输入控件，用于编辑文本或任意类型的值。

* XML 元素：`textField`

* Java 类：`TypedTextField`

== 基本用法

`textField` 是一个带类型的组件，即可以支持输入不同类型的内容。具体的数据类型可以通过与特定类型的实体属性 <<data-binding, 绑定>> 或通过 xref:vc/common-attributes.adoc#datatype[datatype] 属性设置。

[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/textfield/text-field-view.xml[tags=basics]
----

image::visual-components/components/text-field-basic.png[align="center", width="211"]

组件提供了处理带类型值的方法：`setTypedValue()` 和 `getTypedValue()`。这些方法可以用来设置或读取特定类型的值，例如 `Integer` 或 `Long` 等。

当处理组件值变化事件时，建议使用 xref:vc/common-handlers.adoc#TypedValueChangeEvent[TypedValueChangeEvent]，而不要使用 xref:vc/common-handlers.adoc#ComponentValueChangeEvent[ComponentValueChangeEvent]。这样可以确保拿到的值是正确的类型避免额外的数据类型转换或检查。

[[data-binding]]
== 数据绑定

如需将 `textField` 与数据连接，请使用 xref:flow-ui:vc/common-attributes.adoc#dataContainer[dataContainer] 和 xref:flow-ui:vc/common-attributes.adoc#property[property] 属性。

[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/textfield/text-field-view.xml[tags=data;layout;basics-1]
----

上面的示例中，视图为 `Department` 实体定义了 `departmentDc` 数据容器，其中包含 `name` 属性。`textField` 组件通过 `dataContainer` 属性与数据容器进行连接，同时 `property` 属性包含了在 `textField` 中展示的实体属性名称。

[[themeVariants]]
== 样式版本

通过 xref:vc/common-attributes.adoc#themeNames[themeNames] 属性调整文本对齐方式、帮助文本显示位置以及组件的大小。

=== 对齐

有三个选项：`align-left`（默认）、`align-right`、`align-center`。

image::visual-components/components/text-field-alignment.png[align="center", width="625"]

.XML 代码
[%collapsible]
====
[source,xml,indent=0]
----
include::example$onboarding/src/main/resources/com/company/onboarding/view/component/textfield/text-field-view.xml[tags=alignment]
----
====

=== 帮助文本显示位置

设置 `helper-above-field` 可以将帮助文本从默认的组件下方显示位置移至组件上方。

image::visual-components/components/text-field-helper-text-position.png[align="center", width="420"]

.XML 代码
[%collapsible]
====
[source,xml,indent=0]
----
include::example$onboarding/src/main/resources/com/company/onboarding/view/component/textfield/text-field-view.xml[tags=helper-text-position]
----
====

=== 尺寸

有两个选项：默认大小和 `small`。

image::visual-components/components/text-field-size.png[align="center", width="390"]

.XML 代码
[%collapsible]
====
[source,xml,indent=0]
----
include::example$onboarding/src/main/resources/com/company/onboarding/view/component/textfield/text-field-view.xml[tags=size]
----
====


== XML 属性

xref:vc/common-attributes.adoc#id[id] -
xref:vc/common-attributes.adoc#alignSelf[alignSelf] -
xref:vc/common-attributes.adoc#allowedCharPattern[allowedCharPattern] -
xref:vc/common-attributes.adoc#ariaLabel[ariaLabel] -
xref:vc/common-attributes.adoc#ariaLabelledBy[ariaLabelledBy] -
xref:vc/common-attributes.adoc#autocapitalize[autocapitalize] -
xref:vc/common-attributes.adoc#autocomplete[autocomplete] -
xref:vc/common-attributes.adoc#autocorrect[autocorrect] -
xref:vc/common-attributes.adoc#autofocus[autofocus] -
<<autoselect,autoselect>> -
xref:vc/common-attributes.adoc#classNames[classNames] -
<<clearButtonVisible,clearButtonVisible>> -
xref:vc/common-attributes.adoc#colspan[colspan] -
xref:vc/common-attributes.adoc#css[css] -
xref:vc/common-attributes.adoc#dataContainer[dataContainer] -
xref:vc/common-attributes.adoc#datatype[datatype] -
xref:vc/common-attributes.adoc#enabled[enabled] -
xref:vc/common-attributes.adoc#errorMessage[errorMessage] -
xref:vc/common-attributes.adoc#focusShortcut[focusShortcut] -
xref:vc/common-attributes.adoc#height[height] -
xref:vc/common-attributes.adoc#helperText[helperText] -
xref:vc/common-attributes.adoc#label[label] -
xref:vc/common-attributes.adoc#maxHeight[maxHeight] -
xref:vc/common-attributes.adoc#maxLength[maxLength] -
xref:vc/common-attributes.adoc#maxWidth[maxWidth] -
xref:vc/common-attributes.adoc#minHeight[minHeight] -
xref:vc/common-attributes.adoc#minLength[minLength] -
xref:vc/common-attributes.adoc#minWidth[minWidth] -
xref:vc/common-attributes.adoc#pattern[pattern] -
xref:vc/common-attributes.adoc#placeholder[placeholder] -
xref:vc/common-attributes.adoc#property[property] -
xref:vc/common-attributes.adoc#readOnly[readOnly] -
xref:vc/common-attributes.adoc#required[required] -
xref:vc/common-attributes.adoc#requiredMessage[requiredMessage] -
xref:vc/common-attributes.adoc#themeNames[themeNames] -
<<trimEnabled,trimEnabled>> -
xref:vc/common-attributes.adoc#title[title] -
<<value,value>> -
xref:vc/common-attributes.adoc#valueChangeMode[valueChangeMode] -
xref:vc/common-attributes.adoc#valueChangeTimeout[valueChangeTimeout] -
xref:vc/common-attributes.adoc#visible[visible] -
xref:vc/common-attributes.adoc#width[width]

[[autoselect]]
=== autoselect

++++
<div class="jmix-ui-live-demo-container">
    <a href="https://vaadin.com/docs/latest/components/text-field/#autoselect" class="vaadin-docs-btn" target="_blank">Vaadin</a>
</div>
++++

当设置为 `true` 时，如果组件获得了焦点，将自动选中组件的值。

[[clearButtonVisible]]
=== clearButtonVisible

++++
<div class="jmix-ui-live-demo-container">
    <a href="https://vaadin.com/docs/latest/components/text-field/#clear-button" class="vaadin-docs-btn" target="_blank">Vaadin</a>
</div>
++++

设置清空内容按钮的可见性。

[[trimEnabled]]
=== trimEnabled

如果为 `true`，则组件会删除输入字符串的开头和结尾的空格。例如，如果用户输入" aaa bbb "，则保存到链接实体属性的字段的值将为 "aaa bbb"。

可以将 `trimEnabled` 设置为 false 来禁用该功能。

该属性的全局默认值可以通过 xref:ui-properties.adoc#jmix.ui.component.default-trim-enabled[jmix.ui.component.default-trim-enabled] 应用程序属性来设置。

[[value]]
=== value

定义 `textField` 的值。

如果不能按照需要的 xref:flow-ui:vc/common-attributes.adoc#datatype[数据类型] 解析设置的值，则会显示默认的值转换错误消息。

== 事件和处理器

xref:vc/common-handlers.adoc#AttachEvent[AttachEvent] -
xref:vc/common-handlers.adoc#BlurEvent[BlurEvent] -
xref:vc/common-handlers.adoc#ClientValidatedEvent[ClientValidatedEvent] -
xref:vc/common-handlers.adoc#ComponentValueChangeEvent[ComponentValueChangeEvent] -
xref:vc/common-handlers.adoc#CompositionEndEvent[CompositionEndEvent] -
xref:vc/common-handlers.adoc#CompositionStartEvent[CompositionStartEvent] -
xref:vc/common-handlers.adoc#CompositionUpdateEvent[CompositionUpdateEvent] -
xref:vc/common-handlers.adoc#DetachEvent[DetachEvent] -
xref:vc/common-handlers.adoc#FocusEvent[FocusEvent] -
xref:vc/common-handlers.adoc#InputEvent[InputEvent] -
xref:vc/common-handlers.adoc#KeyDownEvent[KeyDownEvent] -
xref:vc/common-handlers.adoc#KeyPressEvent[KeyPressEvent] -
xref:vc/common-handlers.adoc#KeyUpEvent[KeyUpEvent] -
xref:vc/common-handlers.adoc#statusChangeHandler[statusChangeHandler] -
xref:vc/common-handlers.adoc#TypedValueChangeEvent[TypedValueChangeEvent] -
<<validator,validator>>

include::../handler-generation-tip.adoc[]

[[validator]]
=== validator

为组件添加一个 xref:vc/miscellaneous/validator.adoc[validator] 实例。当组件值经验证无效时，验证器必须抛出 `ValidationException`。

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/component/textfield/TextFieldView.java[tags=validator]
----

== XML 内部元素

xref:vc/components/tooltip.adoc[tooltip] -
xref:vc/miscellaneous/validator.adoc[validator] -
xref:vc/miscellaneous/prefix-suffix.adoc[prefix] -
xref:vc/miscellaneous/prefix-suffix.adoc[suffix]

== 参考

{vaadin-docs}/components/text-field[Vaadin 文档^]
