= dropdownButton 列表按钮
:page-aliases: vcl/components/popup-button.adoc

++++
<div class="jmix-ui-live-demo-container">
    <a href="https://demo.jmix.io/ui-samples/sample/dropdown-button-simple" class="live-demo-btn" target="_blank">在线示例</a>
</div>
++++

`dropdownButton` 显示为一个按钮，当点击时会显示一个带列表的下拉菜单。
[cols="1h,6", grid=none]
|===
|XML 元素
|`dropdownButton`
|Java 类
|`DropdownButton`
|XML 属性
|xref:vc/common-attributes.adoc#id[id] -
xref:vc/common-attributes.adoc#alignSelf[alignSelf] -
xref:vc/common-attributes.adoc#classNames[classNames] -
xref:vc/common-attributes.adoc#colspan[colspan] -
xref:vc/common-attributes.adoc#css[css] -
<<dropdownIndicatorVisible,dropdownIndicatorVisible>> -
xref:vc/common-attributes.adoc#enabled[enabled] -
xref:vc/common-attributes.adoc#focusShortcut[focusShortcut] -
xref:vc/common-attributes.adoc#height[height] -
xref:vc/components/button.adoc#icon[icon] -
xref:vc/common-attributes.adoc#maxHeight[maxHeight] -
xref:vc/common-attributes.adoc#maxWidth[maxWidth] -
xref:vc/common-attributes.adoc#minHeight[minHeight] -
xref:vc/common-attributes.adoc#minWidth[minWidth] -
<<openOnHover,openOnHover>> -
xref:vc/components/comboBox.adoc#overlayClass[overlayClass] -
xref:vc/common-attributes.adoc#tabIndex[tabIndex] -
xref:vc/common-attributes.adoc#text[text] -
<<theme-variants,themeNames>> -
xref:vc/common-attributes.adoc#title[title] -
xref:vc/common-attributes.adoc#visible[visible] -
xref:vc/common-attributes.adoc#whiteSpace[whiteSpace] -
xref:vc/common-attributes.adoc#width[width]
|事件和处理器
|xref:vc/common-handlers.adoc#AttachEvent[AttachEvent] -
xref:vc/common-handlers.adoc#BlurEvent[BlurEvent] -
xref:vc/common-handlers.adoc#DetachEvent[DetachEvent] -
xref:vc/common-handlers.adoc#FocusEvent[FocusEvent]
|XML 内部元素
|<<actionItem,actionItem>> -
<<componentItem,componentItem>> -
<<separator,separator>> -
<<textItem,textItem>>
|===

== 基本用法

主按钮显示组件中主要的 xref:vc/common-attributes.adoc#text[文本] 或/和 xref:vc/components/button.adoc#icon[图标]。用户点击按钮打开下拉菜单。

下拉菜单中包含一组可点击的菜单项，每项对于一个操作。

当用户点击操作时，会触发对应的事件方法。

image::visual-components/components/dropdown-button-basics.png[align="center", width="437"]

下面的示例定义了一个带文字、图标以及从 xref:localization:message-bundles.adoc[消息包] 获取提示（使用 `title` 属性）的 `dropdownButton`：

[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/dropdownbutton/dropdown-button-view.xml[tags=basics]
----

== XML 内部元素

XML 中定义 `dropdownButton` 支持一些内部元素：

[[actionItem]]
=== actionItem

`actionItem` 个元素可以将下拉菜单项与特定 xref:actions/declarative-actions.adoc[操作] 进行关联，点击菜单项时执行该操作。

使用 `ref` 属性指定 `action` 的 `id`。

[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/dropdownbutton/dropdown-button-view.xml[tags=actions;layout;dropdownButton;actionItem]
----

当用户点击下拉列表中的 `actionItem` 时，Jmix 会自动触发 `ref` 属性引用的 `action`。为操作生成 `ActionPerformedEvent` 处理方法。并添加逻辑：

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/component/dropdownbutton/DropdownButtonView.java[tags=callAction]
----

[[componentItem]]
=== componentItem

`componentItem` 元素可以为 `dropdownButton` 设置自定义的内容。

[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/dropdownbutton/dropdown-button-view.xml[tags=layout;dropdownButton;componentItem]
----

使用 Jmix Studio 可以为 `DropdownButtonItem.ClickEvent` 事件生成处理器桩代码。

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/component/dropdownbutton/DropdownButtonView.java[tags=emailIt]
----

[[textItem]]
=== textItem

`textItem` 元素设置一个文本。

[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/dropdownbutton/dropdown-button-view.xml[tags=layout;dropdownButton;textItem]
----

使用 Jmix Studio 可以为 `textItem` 的 `DropdownButtonItem.ClickEvent` 事件生成处理器桩代码。

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/component/dropdownbutton/DropdownButtonView.java[tags=whatsAppIt]
----

[[separator]]
=== separator

`separator` 元素用来分隔下拉列表中的菜单项。

[[theme-variants]]
== 样式版本

++++
<div class="jmix-ui-live-demo-container">
    <a href="https://demo.jmix.io/ui-samples/sample/dropdown-button-theme-variant" class="live-demo-btn" target="_blank">在线示例</a>
</div>
++++

使用 xref:vc/common-attributes.adoc#themeNames[themeNames] 属性可以设置预定义的不同按钮样式。

* 重要：
+
image::visual-components/components/dropdown-button-importance.png[align="center", width="396"]
+
[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/dropdownbutton/dropdown-button-view.xml[tags=importance]
----

* 危险或错误：
+
image::visual-components/components/dropdown-button-error.png[align="center", width="381"]
+
[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/dropdownbutton/dropdown-button-view.xml[tags=error]
----

* 成功：
+
image::visual-components/components/dropdown-button-success.png[align="center", width="381"]
+
[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/dropdownbutton/dropdown-button-view.xml[tags=success]
----

* 高对比：
+
image::visual-components/components/dropdown-button-contrast.png[align="center", width="381"]
+
[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/dropdownbutton/dropdown-button-view.xml[tags=contrast]
----

* 不同尺寸：
+
image::visual-components/components/dropdown-button-size.png[align="center", width="347"]
+
[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/dropdownbutton/dropdown-button-view.xml[tags=size]
----

样式版本的主题名在 `DropdownButtonVariant` 类中定义。参阅 {vaadin-docs}/components/button#styles[Vaadin 文档^] 了解更多关于按钮样式的设定。

== XML 属性

在 Jmix 中，所有组件都有一些作用一致的 xref:vc/common-attributes.adoc[通用属性]。
下面是 `dropdownButton` 的特殊属性：

[cols="1h,5,1", grid=rows, frame=none]
|===
|*名称*
|*描述*
|*默认值*
|[[dropdownIndicatorVisible]]dropdownIndicatorVisible
|设置下拉提示符的可见性。
|`true`
|[[openOnHover]]openOnHover
|如果 `openOnHover` 属性设置为 `true`，则当光标悬停或触屏点击时自动显示选项列表。
|`false`
|===
