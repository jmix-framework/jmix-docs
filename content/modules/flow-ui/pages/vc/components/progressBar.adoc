= progressBar 进度条
:page-aliases: vcl/components/progress-bar.adoc

++++
<div class="jmix-ui-live-demo-container">
    <a href="https://demo.jmix.io/ui-samples/sample/progress-bar-simple" class="live-demo-btn" target="_blank">在线示例</a>
</div>
++++

一个可视化指示器，用于展示正在进行中任务的状态和完成情况，例如文件传输、数据加载、复杂的计算或任何其他耗时的任务。

* XML 元素：`progressBar`

* Java 类：`ProgressBar`

[[basics]]
== 基本用法

一个标准的进度条通过 0.0 至 1.0 的值表示任务的进度从 0% 至 100%。

image::visual-components/components/progress-bar-determinate.png[align="center", width="380"]

.XML 代码
[%collapsible%open]
====
[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/progressbar/progress-bar-view.xml[tags=basics]
----
====

[[progress-updates]]
== 进度更新

进度值通常在正在进行的任务的上下文环境中更新，以便进度条能精确反映任务的当前状态。

下面的示例是一个简单的 xref:background-tasks.adoc[后台任务] 更新进度条的值：

.XML 代码
[%collapsible%open]
====
[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/progressbar/progress-bar-view.xml[tags=progress-update]
----
====

.Java code
[%collapsible%open]
====
[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/component/progressbar/ProgressBarView.java[tags=background-tasks]
----
====

<1> 在控制器中注入进度条。
<2> 当视图打开时，初始化一个后台任务。
<3> 定义一个方法创建简单的后台任务。
<4> 任务执行过程中，更新进度状态。

== 模式

进度条根据任务的不同或进度信息是否能获取可以支持 *可确定* 和 *非确定* 两种模式。

[[determinate-mode]]
=== 可确定

默认情况下，`progressBar` 以 *可确定* 的模式展示进度。可以给用户展示任务还需多少时间才能完成。

image::visual-components/components/progress-bar-determinate.png[align="center", width="380"]

.XML 代码
[%collapsible%open]
====
[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/progressbar/progress-bar-view.xml[tags=progress-bar-determinate]
----
====

当任务完成时间可预计或能跟踪任务进度时，请使用可确定模式。

[[indeterminate-mode]]
=== 非确定

设置 <<indeterminate,indeterminate>> 属性为 `true` 可以将进度条改为 *非确定* 模式。该模式下会展示一个循环播放的进度条，而非一个特定的进度值。

image::visual-components/components/progress-bar-indeterminate.gif[align="center", width="380"]

.XML 代码
[%collapsible%open]
====
[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/progressbar/progress-bar-view.xml[tags=progress-bar-indeterminate]
----
====

当无法获取任务进度或展示一个持续运行的任务时，请使用非确定模式。

== 值域

默认情况下，进度条的值必须在 0.0 和 1.0 之间，分别表示 0% 和 100% 的进度。但是这两个值也可以通过 <<min,min>> 和 <<max,max>> 属性修改。

例如，如果任务有 10 个步骤，可以设置 `min="1"`，`max="10"` 来匹配任务的进度。当任务完成 5 步时，进度值也达到了 5：

image::visual-components/components/progress-bar-determinate.png[align="center", width="380"]

.XML 代码
[%collapsible%open]
====
[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/progressbar/progress-bar-view.xml[tags=value-range]
----
====

== 进度对话框

如果需要用户等待任务的完成，可以使用 xref:dialogs.adoc#background-task-dialog[后台任务对话框]。

image::dialogs/backgroundtask-dialog.png[align="center" width="402"]

这个对话框可以禁止用户在任务执行期间的任何交互，直到任务结束或用户取消任务。

== XML 属性

xref:vc/common-attributes.adoc#id[id] -
xref:vc/common-attributes.adoc#alignSelf[alignSelf] -
xref:vc/common-attributes.adoc#classNames[classNames] -
xref:vc/common-attributes.adoc#colspan[colspan] -
xref:vc/common-attributes.adoc#css[css] -
xref:vc/common-attributes.adoc#height[height] -
<<indeterminate, indeterminate>> -
<<max,max>> -
xref:vc/common-attributes.adoc#maxHeight[maxHeight] -
xref:vc/common-attributes.adoc#maxWidth[maxWidth] -
<<min,min>> -
xref:vc/common-attributes.adoc#minHeight[minHeight] -
xref:vc/common-attributes.adoc#minWidth[minWidth] -
<<themeNames, themeNames>> -
<<value,value>> -
xref:vc/common-attributes.adoc#visible[visible] -
xref:vc/common-attributes.adoc#width[width]

[[indeterminate]]
=== indeterminate

++++
<div class="jmix-ui-live-demo-container">
    <a href="https://vaadin.com/docs/latest/components/progress-bar/#modes" class="vaadin-docs-btn" target="_blank">Vaadin</a>
</div>
++++

启用或禁用 <<indeterminate-mode,非确定进度>> 模式。

[[max]]
=== max

++++
<div class="jmix-ui-live-demo-container">
    <a href="https://vaadin.com/docs/latest/components/progress-bar/#bounds-and-initial-value" class="vaadin-docs-btn" target="_blank">Vaadin</a>
</div>
++++

设置进度的最大值。默认值为 `1.0`。

[[min]]
=== min

++++
<div class="jmix-ui-live-demo-container">
    <a href="https://vaadin.com/docs/latest/components/progress-bar/#bounds-and-initial-value" class="vaadin-docs-btn" target="_blank">Vaadin</a>
</div>
++++

设置进度的最小值。默认值为 `0.0`。

[[themeNames]]
=== themeNames

++++
<div class="jmix-ui-live-demo-container">
    <a href="https://vaadin.com/docs/latest/components/progress-bar/#theme-variants" class="vaadin-docs-btn" target="_blank">Vaadin</a>
</div>
++++

设置不同的主题，这样可以改变组件的颜色，更加醒目。

image::visual-components/components/progress-bar-themenames.png[align="center", width="382"]

* `contrast` - 使用对比度更高的颜色。
* `error` - 错误状态。
* `success` - 成功状态。

[[value]]
=== value

++++
<div class="jmix-ui-live-demo-container">
    <a href="https://vaadin.com/docs/latest/components/progress-bar/#bounds-and-initial-value" class="vaadin-docs-btn" target="_blank">Vaadin</a>
</div>
++++

定义 `progressBar` 的值。值必须在默认的 `0.0` 和 `1.0` 或自定义的 `min` 和 `max` 之间。

[[handlers]]
== 事件和处理器

xref:vc/common-handlers.adoc#AttachEvent[AttachEvent] -
xref:vc/common-handlers.adoc#DetachEvent[DetachEvent]

include::../handler-generation-tip.adoc[]

== 参考

{vaadin-docs}/components/progress-bar[Vaadin 文档^]。
