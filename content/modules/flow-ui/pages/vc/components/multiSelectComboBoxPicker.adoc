= multiSelectComboBoxPicker 多选下拉框选择器

++++
<div class="jmix-ui-live-demo-container">
    <a href="https://demo.jmix.io/ui-samples/sample/multi-select-combo-box-picker" class="live-demo-btn" target="_blank">在线示例</a>
</div>
++++

`multiSelectComboBoxPicker` 支持用户从下拉列表或通过操作选择一个或多个条目。该组件支持 xref:vc/components/multiSelectComboBox.adoc[multiSelectComboBox] 的所有功能。

[cols="1h,6", grid=none]
|===
|XML 元素
|`multiSelectComboBoxPicker`
|Java 类
|`JmixMultiSelectComboBoxPicker`
|XML 属性
|xref:vc/common-attributes.adoc#id[id] -
xref:vc/common-attributes.adoc#alignSelf[alignSelf] -
xref:vc/components/comboBox.adoc#allowCustomValue[allowCustomValue] -
xref:vc/common-attributes.adoc#allowedCharPattern[allowedCharPattern] -
xref:vc/common-attributes.adoc#ariaLabel[ariaLabel] -
xref:vc/common-attributes.adoc#ariaLabelledBy[ariaLabelledBy] -
xref:vc/components/multiSelectComboBox.adoc#autoExpand[autoExpand] -
xref:vc/components/comboBox.adoc#autoOpen[autoOpen] -
xref:vc/common-attributes.adoc#autofocus[autofocus] -
xref:vc/common-attributes.adoc#classNames[classNames] -
xref:vc/components/textField.adoc#clearButtonVisible[clearButtonVisible] -
xref:vc/common-attributes.adoc#colspan[colspan] -
xref:vc/common-attributes.adoc#css[css] -
xref:vc/common-attributes.adoc#dataContainer[dataContainer] -
xref:vc/common-attributes.adoc#enabled[enabled] -
xref:vc/common-attributes.adoc#errorMessage[errorMessage] -
xref:vc/common-attributes.adoc#focusShortcut[focusShortcut] -
xref:vc/common-attributes.adoc#height[height] -
xref:vc/common-attributes.adoc#helperText[helperText] -
xref:vc/components/entityComboBox.adoc#itemsContainer[itemsContainer] -
xref:vc/components/comboBox.adoc#items-enum[itemsEnum] -
xref:vc/common-attributes.adoc#label[label] -
xref:vc/common-attributes.adoc#maxHeight[maxHeight] -
xref:vc/common-attributes.adoc#maxWidth[maxWidth] -
xref:vc/components/multiSelectComboBox.adoc#metaClass[metaClass] -
xref:vc/common-attributes.adoc#minHeight[minHeight] -
xref:vc/common-attributes.adoc#minWidth[minWidth] -
xref:vc/components/multiSelectComboBox.adoc#opened[opened] -
xref:vc/components/comboBox.adoc#overlayClass[overlayClass] -
//overlayWidth -1
xref:vc/components/comboBox.adoc#pageSize[pageSize] -
xref:vc/common-attributes.adoc#placeholder[placeholder] -
xref:vc/common-attributes.adoc#property[property] -
xref:vc/common-attributes.adoc#readOnly[readOnly] -
xref:vc/common-attributes.adoc#required[required] -
xref:vc/common-attributes.adoc#requiredMessage[requiredMessage] -
xref:vc/components/multiSelectComboBox.adoc#selectedItemsOnTop[selectedItemsOnTop] -
xref:vc/common-attributes.adoc#tabIndex[tabIndex] -
xref:vc/components/comboBox.adoc#theme-variants[themeNames] -
xref:vc/common-attributes.adoc#title[title] -
xref:vc/common-attributes.adoc#visible[visible] -
xref:vc/common-attributes.adoc#width[width]
|事件和处理器
|xref:vc/common-handlers.adoc#AttachEvent[AttachEvent] -
xref:vc/common-handlers.adoc#BlurEvent[BlurEvent] -
xref:vc/common-handlers.adoc#ClientValidatedEvent[ClientValidatedEvent] -
xref:vc/common-handlers.adoc#ComponentValueChangeEvent[ComponentValueChangeEvent] -
xref:vc/components/comboBox.adoc#CustomValueSetEvent[CustomValueSetEvent] -
xref:vc/common-handlers.adoc#DetachEvent[DetachEvent] -
xref:vc/common-handlers.adoc#FocusEvent[FocusEvent] -
xref:vc/common-handlers.adoc#TypedValueChangeEvent[TypedValueChangeEvent] -
xref:vc/components/multiSelectComboBox.adoc#itemLabelGenerator[itemLabelGenerator] -
xref:vc/components/multiSelectComboBox.adoc#itemsFetchCallback[itemsFetchCallback] -
xref:vc/components/multiSelectComboBox.adoc#renderer[renderer] -
xref:vc/components/textField.adoc#validator[validator]
|XML 内部元素
|xref:vc/components/entityPicker.adoc#actions[actions] -
xref:vc/components/select.adoc#fragment-renderer[fragmentRenderer] -
xref:vc/components/multiSelectComboBox.adoc#itemsQuery[itemsQuery] -
xref:vc/components/tooltip.adoc[tooltip] -
<<validation,validators>>
|===

== 基本用法

当用户使用指针设备点击该控件时，会打开下拉列表。在控件获得焦点时，使用键盘的 `↑` 和 `↓` 键或输入字符也会打开下拉列表。

image::visual-components/components/multi-select-combo-box-picker-basics.png[align="center", width="276"]

`multiSelectComboBoxPicker` 控件中可以定义任意数量的操作，在组件右侧显示为按钮。操作可以通过 XML 中的 `actions` 内部元素定义，也可以在控制器中使用 `addAction()` 以编程方式添加。

[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/multiselectcomboboxpicker/multi-select-combo-box-picker-view.xml[tags=basics]
----

[[data-binding]]
== 数据绑定

数据绑定是指将组件与 xref:data/data-containers.adoc[数据容器] 进行关联。可视化组件或相应数据容器中的更改可以触发彼此的更新。有关详细信息，请参阅 xref:data/data-examples.adoc[]。

如需创建关联数据的 `multiSelectComboBoxPicker`，请使用 xref:vc/common-attributes.adoc#dataContainer[dataContainer] 和 xref:vc/common-attributes.adoc#property[property] 属性。xref:vc/components/entityComboBox.adoc#itemsContainer[itemsContainer] 属性用于创建控件中的选项列表。下面的示例生成了一个数据感知的 `multiSelectComboBoxPicker`。

[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/multiselectcomboboxpicker/multi-select-combo-box-picker-view.xml[tags=data;userDc;hobbiesDc;facets;layout;data-bind]
----

<1> 数据容器中包含当前编辑的 `User` 实例。
<2> 扩展了 Fetch plan，获取 `Hobby` 实例的列表，可用于选择。
<3> `Hobby` 实体的 `CollectionContainer`。
<4> 数据加载协调器自动为组件提供可供选择的实例。
<5> `multiSelectComboBoxPicker` 使用 `hobbiesDc` 作为选项容器，下拉列表中显示 hobby 的列表。
<6> 添加预定义的操作清除所选内容。
<7> 添加预定义的操作打开查找视图。

组件的值返回选择条目的列表。

[[meta-class]]
== 使用 MetaClass

`multiSelectComboBoxPicker` 也可以不与数据关联使用，即，不需要设置 `dataContainer` 或 `property` 属性。此时，可以使用 `metaClass` 属性指定 `multiSelectComboBoxPicker` 的实体类。`itemsContainer` 属性用于创建控件中的选项列表。

例如，组件可以直接处理 `Hobby`，那么需要设置 `metaClass` 为 `Hobby`：

[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/multiselectcomboboxpicker/multi-select-combo-box-picker-view.xml[tags=metaClass]
----

[[basic-features]]
== 基本功能

支持 `comboBox` 或 `multiSelectComboBox` 组件的常用功能：

* xref:vc/components/comboBox.adoc#custom-items[自定义选项]
* xref:vc/components/comboBox.adoc#custom-filtering[自定义过滤]
* xref:vc/components/comboBox.adoc#custom-value-entry[自定义选项值]
* xref:vc/components/comboBox.adoc#rendering-items[选项渲染]
* xref:vc/components/multiSelectComboBox.adoc#auto-expand[自动展开]
* xref:vc/components/multiSelectComboBox.adoc#selected-items-on-top[已选条目置顶]
* xref:vc/components/multiSelectComboBox.adoc#items-fetch-callback[选项获取回调]

[[validation]]
== 验证

如需检查 `multiSelectComboBoxPicker` 组件输入的值，可以在内部元素 `validators` 中添加一个 xref:vc/miscellaneous/validator.adoc[validator]元素。

`multiSelectComboBoxPicker` 可以使用下列预定义的验证器：

[cols="1h,6", grid=none]
|===
|XML 元素
|`validators`
|预定义验证器
|xref:vc/miscellaneous/validator.adoc#custom-validator[custom] - xref:vc/miscellaneous/validator.adoc#NotEmptyValidator[notEmpty] - xref:vc/miscellaneous/validator.adoc#NotNullValidator[notNull] - xref:vc/miscellaneous/validator.adoc#SizeValidator[size]
|===
