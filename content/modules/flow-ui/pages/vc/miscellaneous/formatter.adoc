= Formatter
:page-aliases: vcl/miscellaneous/formatter.adoc

`Formatter` предназначен для преобразования некоторого значения в его строковое представление.

NOTE: Форматтер можно использовать только с нередактируемыми компонентами, такими как xref:vc/components/valuePicker.adoc[valuePicker], xref:vc/components/multiValuePicker.adoc[multiValuePicker] и xref:vc/components/entityPicker.adoc[entityPicker]. Значения непосредственно редактируемых компонентов, например xref:vc/components/textField.adoc[textField], форматируются механизмом xref:data-model:data-types.adoc[Datatype].

Фреймворк содержит набор форматтеров, которые можно использовать в проекте.

В XML-дескрипторах экранов форматтеры добавляются компонентам во вложенном в компонент элементе `formatter`.

[TIP]
====
Чтобы добавить форматтер для компонента в Jmix Studio, выберите компонент в XML-дескрипторе экрана или на панели структуры *Jmix UI* и нажмите кнопку *Add* на панели инспектора *Jmix UI*.

Ниже приведен пример добавления форматтера компоненту xref:vc/components/valuePicker.adoc[valuePicker]:

image::visual-components/add-formatter.png[align="center",width="607"]
====

Каждый форматтер представляет собой prototype bean, поэтому если необходимо использовать форматтеры в коде Java, их нужно получать с помощью `ApplicationContext` или `ObjectProvider`. См. примеры ниже.

[[number-formatter]]
== Number Formatter

Форматтер чисел представляет числовое значение в виде строки в соответствии с указанным форматом.

Он имеет следующий атрибут:

* `format` -  строка формата, которая используется для создания экземпляра `DecimalFormat`. Это может быть либо сама строка формата, либо ключ в xref:localization:message-bundles.adoc[пакете сообщений].

Использование в XML:

[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/formatter/formatter-view.xml[tags=number]
----

Использование в Java:

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/component/formatter/FormatterView.java[tags=valueNumberPicker;applicationContext;onInit;setFormatter]
----

[[date-time-formatter]]
== Date and Time Formatter

Форматтер даты и времени представляет временное значение в виде строки в соответствии с указанным форматом.

Он имеет следующие атрибуты:

* `format` - строка формата, который используется для создания экземпляра `SimpleDateFormat`. Это может быть либо сама строка формата, либо ключ в xref:localization:message-bundles.adoc[пакете сообщений].
* `type` - тип форматтера: `DATE` или `DATETIME`. Если он указан, значение будет отформатировано с использованием `DateDatatype` или `DateTimeDatatype` соответственно.
* `useUserTimezone` - должен ли форматтер отображать дату и время в часовом поясе текущего пользователя. По умолчанию форматтер отображает дату и время в часовом поясе сервера. Чтобы отобразить часовой пояс текущего пользователя, установите `true` в данном атрибуте.

Использование в XML:

[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/formatter/formatter-view.xml[tags=date]
----

Использование в Java:

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/component/formatter/FormatterView.java[tags=valuePicker;applicationContext;onInit;setDateFormatter]
----

[[collection-formatter]]
== Collection Formatter

Форматтер коллекций представляет коллекцию в виде строки с элементами коллекции, разделенными запятыми.

[[custom-formatter]]
== Создание собственных форматтеров

Собственный форматтер можно определить в бине-прототипе, реализующем интерфейс `Formatter`.

Пример объявления пользовательского форматтера:

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/formatters/CurrencyFormatter.java[tags=CurrencyFormatter]
----

В XML-дескрипторе экрана пользовательский форматтер используется во вложенном элементе `custom`:

[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/formatter/formatter-view.xml[tags=withCustomFormatter]
----

Форматтер может быть также задан лямбдой и добавлен программно, например:

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/component/formatter/FormatterView.java[tags=entityPicker;onInit;customFormatter]
----