= 资源保护

授权服务扩展组件中已经自动配置了 {oauth-specification-page}#section-1.1[资源服务^] 的安全性。该配置提供了可扩展点，支持配置对任何 URL 格式进行保护。参阅 xref:security:custom-endpoints.adoc#token-based-authentication[基于 token 的认证] 部分了解如何配置受保护的资源。

[[sendiong-access-token]]
== 发送 access token

上面的配置完成后，所有发送到 `pass:[/greeting/**]` 端点的请求都将需要包含 access token 的 `Authorization` 请求头。请求头的值必须带有 `Bearer`，后面跟上 token 值。示例：

[source]
----
GET /greeting/hello HTTP/1.1
Host: server.example.com
Authorization: Bearer <ACCESS_TOKEN>
----

[[protecting-rest-api-endpoints]]
== 保护通用 REST API 端点

在应用程序中添加了 xref:rest:index.adoc[REST API] 扩展组件后，REST 端点默认不会收到保护。

如需配置基于 token 的认证，可以定义下列应用程序属性（说明请参阅 xref:security:custom-endpoints.adoc#application-properties[这里]）：

[source,properties]
----
include::example$/authserver-ex1/src/main/resources/application.properties[tags=rest-authenticated-url-patterns]
----

访问任何 REST 端点时，都需要先获取 access token 并在 HTTP 请求的 `Authorization` 请求头中使用。请求头的值必须带有 `Bearer`，后面跟上 token 值。示例：

[source]
----
GET /rest/entities/User HTTP/1.1
Host: server.example.com
Authorization: Bearer <ACCESS_TOKEN>
----
