= 展示动态属性

当项目中安装了动态属性扩展组件，则创建新的详情视图或列表视图时，可以使用 <<using-dynamicattributes-facet,dynamicAttributes>> facet。

在视图展示动态属性的另一个方法就是使用 <<dynamic-attributes-panel,DynamicAttributesPanel>>。

[[using-dynamicattributes-facet]]
== 使用 dynamicAttributes Facet

`dynamicAttributes` facet 支持在 `DataGrid` 或 `FormLayout` 组件中展示动态属性，这两种组件需要绑定包含动态属性实体的数据容器。

在界面 XML 中的 `facets` 部分添加 `dynamicAttributes` facet：

[source,xml,indent=0]
----
include::example$/dyn-attr-ex1/src/main/resources/com/company/demo/view/car/car-detail-view.xml[tags=dynamicAttributes]
----

然后，需要在 *Category attribute detail（分类属性编辑）* 视图的 xref:dyn-attr:dynattr-managing.adoc#visibility[可见性] 标签页选择此界面。

[[dynamic-attributes-panel]]
== 使用 DynamicAttributesPanel

如果实体实现了 `Categorized` 接口，则可以使用 `DynamicAttributesPanel` 组件来显示该实体的动态属性。此组件支持为特定实体实例选择分类，并指定此分类的动态属性的值。

如需在详情视图中使用 `DynamicAttributesPanel` 组件，请按照下列步骤：

* 确保在带分类实体的 fetch plan 中，包含了 `category` 属性：
+
[source,xml,indent=0]
----
include::example$/dyn-attr-ex1/src/main/resources/com/company/demo/view/car/car-detail-view.xml[tags=fetchPlan]
----
+
* 在视图中添加 `dynamicAttributesPanel` 可视化组件：
+
[source,xml,indent=0]
----
include::example$/dyn-attr-ex1/src/main/resources/com/company/demo/view/car/car-detail-view.xml[tags=dynamicAttributesPanel]
----
+
// 可以使用 `cols` 参数设置展示动态属性的列数。或者也可以使用 `rows` 来指定行数（但是这种情况下，列数会自动计算）。默认情况下，所有属性会显示在一列内。
// +
// image::dynamic-attribute-panel.gif[align=centre]
// +
// NOTE: 在分类编辑器的 xref:dyn-attr:dynattr-managing.adoc#attributes-location[Attributes Location（属性位置）] 标签页，可以更灵活的自定义动态属性的位置。此时，会忽略 `cols` 和 `rows` 参数值。

// TODO commented out until https://github.com/jmix-framework/jmix/issues/965 is fixed
// == 显式添加特定属性
//
// 最后，也可以手动在视图中添加动态属性。在 `facets` 中添加 <<using-dynamicattributes-facet,dynamicAttributes>> facet，然后在 UI 组件绑定属性时，使用 `+` 前缀指定动态属性：
//
// [source,xml,indent=0]
// ----
//     <facets>
//         <dynattr:dynamicAttributes/>
//         <dataLoadCoordinator auto="true"/>
//     </facets>
//     <data>
//         <instance id="carDc"
//                   class="com.company.demo.entity.Car">
//              <fetchPlan extends="_base">
//             </fetchPlan>
//             <loader/>
//         </instance>
//     </data>
//     <layout>
//         <formLayout id="form" dataContainer="carDc">
//             <!--...-->
//             <textField property="+passengerNumberOfSeats"/>
//         </formLayout>
//         <!--...-->
//     </layout>
// ----

