= Process Modeling

Jmix BPM enables the creation of BPMN process models, configuration of properties for all elements, and development of the code that implements business logic and UI forms. These features facilitate the creation of executable process models that can be deployed to the embedded BPM server.

The add-on utilizes a visual modeler based on the https://bpmn.io/[bpmn-js^] rendering toolkit for process modeling. It is available in two options:

* As an additional tool in Jmix Studio for use within IntelliJ IDEA.
* As a functional component of your web application, distributable without any licensing costs.

For developers, the BPMN Modeler in Studio serves as the primary tool for creating automated processes. It offers features beyond pure modeling, including:

* Navigation to process models through the Jmix project tree.
* BPM Inspector for manipulating the properties of BPMN elements.
* Entity Data Task: an extended BPMN component that enables manipulating with Jmix entities directly within the process.
* Wizard for JPQL queries to load entities.
* Wizard for Jmix view process forms.
* Suggestions and hints where applicable.
* Generation of Spring beans and Java delegate templates in the context of the process.
* Process deployment at application startup and hot deployment.


Modeling processes using the *Web Modeler* and  *Studio Modeler* offer a similar experience,
as both tools feature intuitive interfaces for creating BPMN diagrams.


[[processes-and-drafts]]
== Process and Drafts

When the BPM add-on is installed, an additional *BPM* node appears in the *Jmix project tree*. Initially, this node is empty. As you create drafts and processes, two sub-nodes will appear: *Process Drafts* and *Processes*.

image::process-modeling/bpm-jmix-tree.png[,400]

they are located in the `resources/process-drafts` and `resources/process` directories respectively.

image::process-modeling/process-directories.png[,400]

These two sub-nodes in the Jmix project tree are designed to enhance the developer's experience. In the beginning, you create a draft of the process and save it in the *Process Drafts* node. Then, when the process is ready for deployment, copy it to the *Processes* node.

[NOTE]
====
Technically, there is no difference between _processes_ and _process drafts_: both are valid BPMN 2.0 XML files. But process drafts have an additional extension in the file name following this pattern:
`<process-id>.draft.xml`

When the process model is copied to the *Processes*, the system removes `.draft` extension from its name.
====

[IMPORTANT]
====
Don't remove manually `.draft` extension from names of the files stored in *Process Drafts*.
====

Upon the next application startup, all models in the *Processes* node will be deployed to the server. Alternatively, you can use the *Hot Deploy* feature to deploy them without restarting the application.

image::process-modeling/draft-context-menu.png[,400]
image::process-modeling/process-context-menu.png[,400]


[[process-creating]]
=== Process Creating

In *Jmix Studio*, you can create a new process several ways:

. Using *Jmix Tool Window*:
+
image::process-modeling/new-process-from-jmix-menu.png[,400]

. Using the context menu in the *BPM* node (by right click):
+
image::process-modeling/new-process-from-the-tree.png[,400]

. Using IntelliJ IDEA main menu *File*-> *New*-> *BPMN Process*:
+
image::process-modeling/new-process-from-file-menu.png[]

. Using the context menu (by the right click) from anywhere within your project:
+
image::process-modeling/new-process-context-menu.png[]

Next, a *New BPMN Process* dialog window appears. Enter the process ID in snake case, and the name will be filled automatically.

image::bpmn-process/new-process.png[,500]

After clicking the *OK* button, *BPMN Modeler* will open.

[IMPORTANT]
====
The XML file of this process will be created as a _draft_ and to be placed in the *Process Drafts* folder.
====

[[uploading-processes]]
== Uploading Process Models

You can upload process models into your project from external sources. For this purpose, use regular copy/past features provided by operating system.

Switch to the regular _Project view_ in IntelliJ IDEA and
place the copied XML file in the `resources/process-drafts` or `resources/process` directory.

[WARNING]
====
When pacing in drafts, add `.draft` extension before `.xml` extension.
====
