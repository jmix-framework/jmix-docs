= BPMN Concepts

[[actors]]
== Actors (Performers)

[[activities]]
== Activities


[[business-key]]
== Business Key
A business key is a way to identify a process instance based on business-specific criteria, rather than relying solely on the system-generated process instance ID.
The business key allows you to associate a process instance with a specific business entity or context.

//todo -- определиться с бизнес-ключом, чтоб задаввать его как свойство процесса
You can set up a business key as property of the start event form when selecting an _Input Dialog_ form. Any process variable can be used as a business key.

image::bpmn-subprocesses/setting-business-key.png[,300]

Business key can be updated programmatically via API:

[source,java]
----
runtimeService.updateBusinessKey("processInstanceId", "businessKey");
----

Or using `ProcessFormContext`:

[source,java]
----
processFormContext.processStarting()
        .withBusinessKey("business key")
        .saveInjectedProcessVariables()
        .start();
----


[[collaboration]]
== Collaboration

[[events-definitions]]
== Events Definitions

In BPMN, the messages and signals are a mechanism used to communicate between different elements within a business process.

Both messages and signals play a crucial role in defining the interactions and dependencies between various elements in a BPMN diagram.

Messages and signals must be defined *before* they can be used in events.

To define a message or signal in Studio, open a process model, select nothing to access the process properties and find signal and message definition sections:

image::bpmn-events/message-signal-definitions.png[,300]

In the web modeler you can find message and signal definitions in the process properties as well:

image::bpmn-events/message-signal-definitions-web.png[,300]


[[message-definition]]
=== Defining a Message
To create a message definition, you have to set its _id_ and _name_:

image::bpmn-events/define-messages.png[,450]

[[signal-definition]]
=== Defining a Signal

To create a signal definition, you have to set its _id_ and _name_; besides, you must select a _scope_ parameter, _Global_ or _Process instance_:

image::bpmn-events/define-signal.png[,550]

[[errors-definition]]
=== Errors Definition

image::bpmn-events/errors-definition.png[,400]


=== XML Representation

Message, signal, and error definitions in XML file are located usually between _<process>_ and _<diagram>_ sections.

[source, xml]
----
  </process>
  <message id="green" name="Green" /> <1>
  <message id="yellow" name="Yellow" />
  <message id="red" name="Red" />
  <signal id="ready" name="Ready" flowable:scope="global" /> <2>
  <signal id="stop" name="Stop" flowable:scope="processInstance" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_process">
----
<1> - Message definition
<2> - Signal definition

[NOTE]
====
If you plan to use the same messages and signals in various processes, you have to create their definitions in each BPMN model.
====


[[expressions]]
== Expressions


[[markers]]
== Markers

A _marker_ refers to specific symbols or indicators used within the graphical representation of a process to convey additional information about the activities or events.

Markers are visual elements that provide quick insights into the behavior or characteristics of a process element. They help to differentiate between various types of activities, events, or gateways.

Types of markers:

* *Subprocess Marker*: A plus sign (+) in the upper left corner of a rounded rectangle indicates that the activity is a subprocess that can be expanded to show its internal details.

* *Event Markers*: Different symbols within circles can indicate the type of event (e.g., message, timer, error) and whether it is a catching or throwing event.

* *Multi-instance markers*: Three short vertical or horizontal lines indicating that an activity (task or subprocess) can be executed multiple times in parallel or sequentially.



[[participants]]
== Participants


[[process-definition]]
== Process Definitions

[[process-instance]]
== Process Instances


[[subscriptions]]
== Subscriptions

[[signal-subscription]]
=== Signal subscription


[[tokens]]
== Tokens


[[waiting-state]]
== Waiting State